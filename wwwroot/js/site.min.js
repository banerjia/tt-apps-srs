/*! JSON Editor v0.7.28 - JSON Schema -> HTML Editor
 * By Jeremy Dorn - https://github.com/jdorn/json-editor/
 * Released under the MIT license
 *
 * Date: 2016-08-07
 */
(function(){var r,f;(function(){var n=!1,t=/xyz/.test(function(){window.postMessage("xyz")})?/\b_super\b/:/.*/;return r=function(){},r.extend=function i(r){function f(){!n&&this.init&&this.init.apply(this,arguments)}var o=this.prototype,e,u;n=!0;e=new this;n=!1;for(u in r)e[u]=typeof r[u]=="function"&&typeof o[u]=="function"&&t.test(r[u])?function(n,t){return function(){var r=this._super,i;return this._super=o[n],i=t.apply(this,arguments),this._super=r,i}}(u,r[u]):r[u];return f.prototype=e,f.prototype.constructor=f,f.extend=i,f},r})(),function(){function n(n,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t.bubbles,t.cancelable,t.detail),i}n.prototype=window.Event.prototype;window.CustomEvent=n}(),function(){for(var i=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}(),function(){Array.isArray||(Array.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"})}();var e=function(n){return typeof n!="object"||n.nodeType||n!==null&&n===n.window?!1:n.constructor&&!Object.prototype.hasOwnProperty.call(n.constructor.prototype,"isPrototypeOf")?!1:!0},i=function(n){for(var r,t,u=1;u<arguments.length;u++){r=arguments[u];for(t in r)r.hasOwnProperty(t)&&(r[t]&&e(r[t])?(n.hasOwnProperty(t)||(n[t]={}),i(n[t],r[t])):n[t]=r[t])}return n},t=function(n,t){var i,r;if(n&&typeof n=="object")if(Array.isArray(n)||typeof n.length=="number"&&n.length>0&&n.length-1 in n){for(i=0;i<n.length;i++)if(t(i,n[i])===!1)return}else if(Object.keys){for(r=Object.keys(n),i=0;i<r.length;i++)if(t(r[i],n[r[i]])===!1)return}else for(i in n)if(n.hasOwnProperty(i)&&t(i,n[i])===!1)return},u=function(n,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0);n.dispatchEvent(i)},o=function(n,t){var i=new CustomEvent(t,{bubbles:!0,cancelable:!0});n.dispatchEvent(i)},n=function(t,r){if(!(t instanceof Element))throw new Error("element should be an instance of Element");r=i({},n.defaults.options,r||{});this.element=t;this.options=r;this.init()};n.prototype={constructor:n,init:function(){var t=this,i,r;if(this.ready=!1,this.copyClipboard=null,i=n.defaults.themes[this.options.theme||n.defaults.theme],!i)throw"Unknown theme "+(this.options.theme||n.defaults.theme);this.schema=this.options.schema;this.theme=new i;this.template=this.options.template;this.refs=this.options.refs||{};this.uuid=0;this.__data={};r=n.defaults.iconlibs[this.options.iconlib||n.defaults.iconlib];r&&(this.iconlib=new r);this.root_container=this.theme.getContainer();this.element.appendChild(this.root_container);this.translate=this.options.translate||n.defaults.translate;this._loadExternalRefs(this.schema,function(){var i,r,u;t._getDefinitions(t.schema);i={};t.options.custom_validators&&(i.custom_validators=t.options.custom_validators);t.validator=new n.Validator(t,null,i);r=t.expandRefs(t.schema);u=t.getEditorClass(r);t.root=t.createEditor(u,{jsoneditor:t,schema:r,required:!0,container:t.root_container});t.root.preBuild();t.root.build();t.root.postBuild();t.options.hasOwnProperty("startval")&&t.root.setValue(t.options.startval);t.validation_results=t.validator.validate(t.root.getValue());t.root.showValidationErrors(t.validation_results);t.ready=!0;window.requestAnimationFrame(function(){t.ready&&(t.validation_results=t.validator.validate(t.root.getValue()),t.root.showValidationErrors(t.validation_results),t.trigger("ready"),t.trigger("change"))})})},getValue:function(){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before getting the value";return this.root.getValue()},setValue:function(n){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before setting the value";return this.root.setValue(n),this},validate:function(n){if(!this.ready)throw"JSON Editor not ready yet.  Listen for 'ready' event before validating";return arguments.length===1?this.validator.validate(n):this.validation_results},destroy:function(){this.destroyed||this.ready&&(this.schema=null,this.options=null,this.root.destroy(),this.root=null,this.root_container=null,this.validator=null,this.validation_results=null,this.theme=null,this.iconlib=null,this.template=null,this.__data=null,this.ready=!1,this.element.innerHTML="",this.destroyed=!0)},on:function(n,t){return this.callbacks=this.callbacks||{},this.callbacks[n]=this.callbacks[n]||[],this.callbacks[n].push(t),this},off:function(n,t){var r,i;if(n&&t){for(this.callbacks=this.callbacks||{},this.callbacks[n]=this.callbacks[n]||[],r=[],i=0;i<this.callbacks[n].length;i++)this.callbacks[n][i]!==t&&r.push(this.callbacks[n][i]);this.callbacks[n]=r}else n?(this.callbacks=this.callbacks||{},this.callbacks[n]=[]):this.callbacks={};return this},trigger:function(n){if(this.callbacks&&this.callbacks[n]&&this.callbacks[n].length)for(var t=0;t<this.callbacks[n].length;t++)this.callbacks[n][t]();return this},setOption:function(n,t){if(n==="show_errors")this.options.show_errors=t,this.onChange();else throw"Option "+n+" must be set during instantiation and cannot be changed later";return this},getEditorClass:function(i){var r;if(i=this.expandSchema(i),t(n.defaults.resolvers,function(t,u){var f=u(i);if(f&&n.defaults.editors[f])return r=f,!1}),!r)throw"Unknown editor for schema "+JSON.stringify(i);if(!n.defaults.editors[r])throw"Unknown editor "+r;return n.defaults.editors[r]},createEditor:function(n,t){return t=i({},n.options||{},t),new n(t)},onChange:function(){if(this.ready&&!this.firing_change){this.firing_change=!0;var n=this;return window.requestAnimationFrame(function(){(n.firing_change=!1,n.ready)&&(n.validation_results=n.validator.validate(n.root.getValue()),n.options.show_errors!=="never"?n.root.showValidationErrors(n.validation_results):n.root.showValidationErrors([]),n.trigger("change"))}),this}},compileTemplate:function(t,i){i=i||n.defaults.template;var r;if(typeof i=="string"){if(!n.defaults.templates[i])throw"Unknown template engine "+i;if(r=n.defaults.templates[i](),!r)throw"Template engine "+i+" missing required library.";}else r=i;if(!r)throw"No template engine set";if(!r.compile)throw"Invalid template engine set";return r.compile(t)},_data:function(n,t,i){if(arguments.length===3){var r;n.hasAttribute("data-jsoneditor-"+t)?r=n.getAttribute("data-jsoneditor-"+t):(r=this.uuid++,n.setAttribute("data-jsoneditor-"+t,r));this.__data[r]=i}else return n.hasAttribute("data-jsoneditor-"+t)?this.__data[n.getAttribute("data-jsoneditor-"+t)]:null},registerEditor:function(n){return this.editors=this.editors||{},this.editors[n.path]=n,this},unregisterEditor:function(n){return this.editors=this.editors||{},this.editors[n.path]=null,this},getEditor:function(n){if(this.editors)return this.editors[n]},watch:function(n,t){return this.watchlist=this.watchlist||{},this.watchlist[n]=this.watchlist[n]||[],this.watchlist[n].push(t),this},unwatch:function(n,t){var r,i;if(!this.watchlist||!this.watchlist[n])return this;if(!t)return this.watchlist[n]=null,this;for(r=[],i=0;i<this.watchlist[n].length;i++)if(this.watchlist[n][i]===t)continue;else r.push(this.watchlist[n][i]);return this.watchlist[n]=r.length?r:null,this},notifyWatchers:function(n){if(!this.watchlist||!this.watchlist[n])return this;for(var t=0;t<this.watchlist[n].length;t++)this.watchlist[n][t]()},isEnabled:function(){return!this.root||this.root.isEnabled()},enable:function(){this.root.enable()},disable:function(){this.root.disable()},_getDefinitions:function(n,t){if(t=t||"#/definitions/",n.definitions)for(var i in n.definitions)n.definitions.hasOwnProperty(i)&&(this.refs[t+i]=n.definitions[i],n.definitions[i].definitions&&this._getDefinitions(n.definitions[i],t+i+"/definitions/"))},_getExternalRefs:function(n){var r={},u=function(n){for(var t in n)n.hasOwnProperty(t)&&(r[t]=!0)},t,i;n.$ref&&typeof n.$ref!="object"&&n.$ref.substr(0,1)!=="#"&&!this.refs[n.$ref]&&(r[n.$ref]=!0);for(t in n)if(n.hasOwnProperty(t))if(n[t]&&typeof n[t]=="object"&&Array.isArray(n[t]))for(i=0;i<n[t].length;i++)n[t][i]&&typeof n[t][i]=="object"&&u(this._getExternalRefs(n[t][i]));else n[t]&&typeof n[t]=="object"&&u(this._getExternalRefs(n[t]));return r},_loadExternalRefs:function(n,i){var r=this,o=this._getExternalRefs(n),f=0,u=0,e=!1;t(o,function(n){var o,t;if(!r.refs[n]){if(!r.options.ajax)throw"Must set ajax option to true to load external ref "+n;r.refs[n]="loading";u++;o=n;r.options.ajaxBase&&r.options.ajaxBase!=n.substr(0,r.options.ajaxBase.length)&&"http"!=n.substr(0,4)&&(o=r.options.ajaxBase+n);t=new XMLHttpRequest;t.open("GET",o,!0);r.options.ajaxCredentials&&(t.withCredentials=r.options.ajaxCredentials);t.onreadystatechange=function(){if(t.readyState==4)if(t.status===200){var s;try{s=JSON.parse(t.responseText)}catch(h){window.console.log(h);throw"Failed to parse external ref "+o;}if(!s||typeof s!="object")throw"External ref does not contain a valid schema - "+o;r.refs[n]=s;r._loadExternalRefs(s,function(){f++;f>=u&&!e&&(e=!0,i())})}else{window.console.log(t);throw"Failed to fetch ref via ajax- "+n;}};t.send()}});u||i()},expandRefs:function(n){for(n=i({},n);n.$ref;){var t=n.$ref;delete n.$ref;this.refs[t]||(t=decodeURIComponent(t));n=this.extendSchemas(n,this.refs[t])}return n},expandSchema:function(n){var f=this,u=i({},n),r,e;if(typeof n.type=="object"&&(Array.isArray(n.type)?t(n.type,function(t,i){typeof i=="object"&&(n.type[t]=f.expandSchema(i))}):n.type=f.expandSchema(n.type)),typeof n.disallow=="object"&&(Array.isArray(n.disallow)?t(n.disallow,function(t,i){typeof i=="object"&&(n.disallow[t]=f.expandSchema(i))}):n.disallow=f.expandSchema(n.disallow)),n.anyOf&&t(n.anyOf,function(t,i){n.anyOf[t]=f.expandSchema(i)}),n.dependencies&&t(n.dependencies,function(t,i){typeof i!="object"||Array.isArray(i)||(n.dependencies[t]=f.expandSchema(i))}),n.not&&(n.not=this.expandSchema(n.not)),n.allOf){for(r=0;r<n.allOf.length;r++)u=this.extendSchemas(u,this.expandSchema(n.allOf[r]));delete u.allOf}if(n["extends"]){if(Array.isArray(n["extends"]))for(r=0;r<n["extends"].length;r++)u=this.extendSchemas(u,this.expandSchema(n["extends"][r]));else u=this.extendSchemas(u,this.expandSchema(n["extends"]));delete u["extends"]}if(n.oneOf)for(e=i({},u),delete e.oneOf,r=0;r<n.oneOf.length;r++)u.oneOf[r]=this.extendSchemas(this.expandSchema(n.oneOf[r]),e);return this.expandRefs(u)},extendSchemas:function(n,r){n=i({},n);r=i({},r);var f=this,u={};return t(n,function(n,t){typeof r[n]!="undefined"?(n==="required"||n==="defaultProperties")&&typeof t=="object"&&Array.isArray(t)?u[n]=t.concat(r[n]).reduce(function(n,t){return n.indexOf(t)<0&&n.push(t),n},[]):n==="type"&&(typeof t=="string"||Array.isArray(t))?(typeof t=="string"&&(t=[t]),typeof r.type=="string"&&(r.type=[r.type]),u.type=r.type&&r.type.length?t.filter(function(n){return r.type.indexOf(n)!==-1}):t,u.type.length===1&&typeof u.type[0]=="string"?u.type=u.type[0]:u.type.length===0&&delete u.type):u[n]=typeof t=="object"&&Array.isArray(t)?t.filter(function(t){return r[n].indexOf(t)!==-1}):typeof t=="object"&&t!==null?f.extendSchemas(t,r[n]):t:u[n]=t}),t(r,function(t,i){typeof n[t]=="undefined"&&(u[t]=i)}),u},setCopyClipboardContents:function(n){this.copyClipboard=n},getCopyClipboardContents:function(){return this.copyClipboard}};n.defaults={themes:{},templates:{},iconlibs:{},editors:{},languages:{},resolvers:[],custom_validators:[]};n.Validator=r.extend({init:function(t,i,r){this.jsoneditor=t;this.schema=i||this.jsoneditor.schema;this.options=r||{};this.translate=this.jsoneditor.translate||n.defaults.translate},validate:function(n){return this._validateSchema(this.schema,n)},_validateSchema:function(r,u,f){var w=this,o=[],s,e,h,k=JSON.stringify(u),y,c,l,p,a,v,b;if(f=f||"root",r=i({},this.jsoneditor.expandRefs(r)),typeof u=="undefined")return(typeof r.required!="undefined"&&r.required===!0||typeof r.required=="undefined"&&this.jsoneditor.options.required_by_default===!0)&&o.push({path:f,property:"required",message:this.translate("error_notset")}),o;if(r["enum"]){for(s=!1,e=0;e<r["enum"].length;e++)k===JSON.stringify(r["enum"][e])&&(s=!0);s||o.push({path:f,property:"enum",message:this.translate("error_enum")})}if(r["extends"])for(e=0;e<r["extends"].length;e++)o=o.concat(this._validateSchema(r["extends"][e],u,f));if(r.allOf)for(e=0;e<r.allOf.length;e++)o=o.concat(this._validateSchema(r.allOf[e],u,f));if(r.anyOf){for(s=!1,e=0;e<r.anyOf.length;e++)if(!this._validateSchema(r.anyOf[e],u,f).length){s=!0;break}s||o.push({path:f,property:"anyOf",message:this.translate("error_anyOf")})}if(r.oneOf){for(s=0,y=[],e=0;e<r.oneOf.length;e++){for(c=this._validateSchema(r.oneOf[e],u,f),c.length||s++,h=0;h<c.length;h++)c[h].path=f+".oneOf["+e+"]"+c[h].path.substr(f.length);y=y.concat(c)}s!==1&&(o.push({path:f,property:"oneOf",message:this.translate("error_oneOf",[s])}),o=o.concat(y))}if(r.not&&(this._validateSchema(r.not,u,f).length||o.push({path:f,property:"not",message:this.translate("error_not")})),r.type)if(Array.isArray(r.type)){for(s=!1,e=0;e<r.type.length;e++)if(this._checkType(r.type[e],u)){s=!0;break}s||o.push({path:f,property:"type",message:this.translate("error_type_union")})}else this._checkType(r.type,u)||o.push({path:f,property:"type",message:this.translate("error_type",[r.type])});if(r.disallow)if(Array.isArray(r.disallow)){for(s=!0,e=0;e<r.disallow.length;e++)if(this._checkType(r.disallow[e],u)){s=!1;break}s||o.push({path:f,property:"disallow",message:this.translate("error_disallow_union")})}else this._checkType(r.disallow,u)&&o.push({path:f,property:"disallow",message:this.translate("error_disallow",[r.disallow])});if(typeof u=="number")(r.multipleOf||r.divisibleBy)&&(l=r.multipleOf||r.divisibleBy,s=u/l===Math.floor(u/l),window.math?s=window.math.mod(window.math.bignumber(u),window.math.bignumber(l)).equals(0):window.Decimal&&(s=new window.Decimal(u).mod(new window.Decimal(l)).equals(0)),s||o.push({path:f,property:r.multipleOf?"multipleOf":"divisibleBy",message:this.translate("error_multipleOf",[l])})),r.hasOwnProperty("maximum")&&(s=r.exclusiveMaximum?u<r.maximum:u<=r.maximum,window.math?s=window.math[r.exclusiveMaximum?"smaller":"smallerEq"](window.math.bignumber(u),window.math.bignumber(r.maximum)):window.Decimal&&(s=new window.Decimal(u)[r.exclusiveMaximum?"lt":"lte"](new window.Decimal(r.maximum))),s||o.push({path:f,property:"maximum",message:this.translate(r.exclusiveMaximum?"error_maximum_excl":"error_maximum_incl",[r.maximum])})),r.hasOwnProperty("minimum")&&(s=r.exclusiveMinimum?u>r.minimum:u>=r.minimum,window.math?s=window.math[r.exclusiveMinimum?"larger":"largerEq"](window.math.bignumber(u),window.math.bignumber(r.minimum)):window.Decimal&&(s=new window.Decimal(u)[r.exclusiveMinimum?"gt":"gte"](new window.Decimal(r.minimum))),s||o.push({path:f,property:"minimum",message:this.translate(r.exclusiveMinimum?"error_minimum_excl":"error_minimum_incl",[r.minimum])}));else if(typeof u=="string")r.maxLength&&(u+"").length>r.maxLength&&o.push({path:f,property:"maxLength",message:this.translate("error_maxLength",[r.maxLength])}),r.minLength&&(u+"").length<r.minLength&&o.push({path:f,property:"minLength",message:this.translate(r.minLength===1?"error_notempty":"error_minLength",[r.minLength])}),r.pattern&&(new RegExp(r.pattern).test(u)||o.push({path:f,property:"pattern",message:this.translate("error_pattern",[r.pattern])}));else if(typeof u=="object"&&u!==null&&Array.isArray(u)){if(r.items)if(Array.isArray(r.items))for(e=0;e<u.length;e++)if(r.items[e])o=o.concat(this._validateSchema(r.items[e],u[e],f+"."+e));else if(r.additionalItems===!0)break;else if(r.additionalItems)o=o.concat(this._validateSchema(r.additionalItems,u[e],f+"."+e));else if(r.additionalItems===!1){o.push({path:f,property:"additionalItems",message:this.translate("error_additionalItems")});break}else break;else for(e=0;e<u.length;e++)o=o.concat(this._validateSchema(r.items,u[e],f+"."+e));if(r.maxItems&&u.length>r.maxItems&&o.push({path:f,property:"maxItems",message:this.translate("error_maxItems",[r.maxItems])}),r.minItems&&u.length<r.minItems&&o.push({path:f,property:"minItems",message:this.translate("error_minItems",[r.minItems])}),r.uniqueItems)for(p={},e=0;e<u.length;e++){if(s=JSON.stringify(u[e]),p[s]){o.push({path:f,property:"uniqueItems",message:this.translate("error_uniqueItems")});break}p[s]=!0}}else if(typeof u=="object"&&u!==null){if(r.maxProperties){s=0;for(e in u)u.hasOwnProperty(e)&&s++;s>r.maxProperties&&o.push({path:f,property:"maxProperties",message:this.translate("error_maxProperties",[r.maxProperties])})}if(r.minProperties){s=0;for(e in u)u.hasOwnProperty(e)&&s++;s<r.minProperties&&o.push({path:f,property:"minProperties",message:this.translate("error_minProperties",[r.minProperties])})}if(typeof r.required!="undefined"&&Array.isArray(r.required))for(e=0;e<r.required.length;e++)typeof u[r.required[e]]=="undefined"&&o.push({path:f,property:"required",message:this.translate("error_required",[r.required[e]])});if(a={},r.properties)if(typeof r.required!="undefined"&&Array.isArray(r.required))for(e=0;e<r.required.length;e++)v=r.required[e],a[v]=!0,o=o.concat(this._validateSchema(r.properties[v],u[v],f+"."+v));else for(e in r.properties)r.properties.hasOwnProperty(e)&&(a[e]=!0,o=o.concat(this._validateSchema(r.properties[e],u[e],f+"."+e)));if(r.patternProperties)for(e in r.patternProperties)if(r.patternProperties.hasOwnProperty(e)){b=new RegExp(e);for(h in u)u.hasOwnProperty(h)&&b.test(h)&&(a[h]=!0,o=o.concat(this._validateSchema(r.patternProperties[e],u[h],f+"."+h)))}if(typeof r.additionalProperties!="undefined"||!this.jsoneditor.options.no_additional_properties||r.oneOf||r.anyOf||(r.additionalProperties=!1),typeof r.additionalProperties!="undefined")for(e in u)if(u.hasOwnProperty(e)&&!a[e])if(r.additionalProperties)if(r.additionalProperties===!0)break;else o=o.concat(this._validateSchema(r.additionalProperties,u[e],f+"."+e));else{o.push({path:f,property:"additionalProperties",message:this.translate("error_additional_properties",[e])});break}if(r.dependencies)for(e in r.dependencies)if(r.dependencies.hasOwnProperty(e)&&typeof u[e]!="undefined")if(Array.isArray(r.dependencies[e]))for(h=0;h<r.dependencies[e].length;h++)typeof u[r.dependencies[e][h]]=="undefined"&&o.push({path:f,property:"dependencies",message:this.translate("error_dependency",[r.dependencies[e][h]])});else o=o.concat(this._validateSchema(r.dependencies[e],u,f))}return t(n.defaults.custom_validators,function(n,t){o=o.concat(t.call(w,r,u,f))}),this.options.custom_validators&&t(this.options.custom_validators,function(n,t){o=o.concat(t.call(w,r,u,f))}),o},_checkType:function(n,t){return typeof n=="string"?n==="string"?typeof t=="string":n==="number"?typeof t=="number":n==="integer"?typeof t=="number"&&t===Math.floor(t):n==="boolean"?typeof t=="boolean":n==="array"?Array.isArray(t):n==="object"?t!==null&&!Array.isArray(t)&&typeof t=="object":n==="null"?t===null:!0:!this._validateSchema(n,t).length}});n.AbstractEditor=r.extend({onChildEditorChange:function(){this.onChange(!0)},notify:function(){this.path&&this.jsoneditor.notifyWatchers(this.path)},change:function(){if(this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor&&this.jsoneditor.onChange()},onChange:function(n){this.notify();this.watch_listener&&this.watch_listener();n&&this.change()},register:function(){this.jsoneditor.registerEditor(this);this.onChange()},unregister:function(){this.jsoneditor&&this.jsoneditor.unregisterEditor(this)},getNumColumns:function(){return 12},init:function(t){this.jsoneditor=t.jsoneditor;this.theme=this.jsoneditor.theme;this.template_engine=this.jsoneditor.template;this.iconlib=this.jsoneditor.iconlib;this.translate=this.jsoneditor.translate||n.defaults.translate;this.original_schema=t.schema;this.schema=this.jsoneditor.expandSchema(this.original_schema);this.options=i({},this.options||{},this.schema.options||{},t.schema.options||{},t);t.path||this.schema.id||(this.schema.id="root");this.path=t.path||"root";this.formname=t.formname||this.path.replace(/\.([^.]+)/g,"[$1]");this.jsoneditor.options.form_name_root&&(this.formname=this.formname.replace(/^root\[/,this.jsoneditor.options.form_name_root+"["));this.key=this.path.split(".").pop();this.parent=t.parent;this.link_watchers=[];t.container&&this.setContainer(t.container);this.registerDependencies()},registerDependencies:function(){var n,t;(this.dependenciesFulfilled=!0,n=this.options.dependencies,n)&&(t=this,Object.keys(n).forEach(function(i){var r=t.path.split("."),u;r[r.length-1]=i;r=r.join(".");u=n[i];t.jsoneditor.watch(r,function(){t.checkDependency(r,u)})}))},checkDependency:function(n,t){var f=this.control||this.container;if(this.path!==n&&f){var u=this,r=this.jsoneditor.getEditor(n),i=r?r.getValue():undefined,e=this.dependenciesFulfilled;this.dependenciesFulfilled=!1;r&&r.dependenciesFulfilled?Array.isArray(t)?t.some(function(n){if(i===n)return u.dependenciesFulfilled=!0,!0}):typeof t=="object"?typeof i!="object"?this.dependenciesFulfilled=t===i:Object.keys(t).some(function(n){if(!t.hasOwnProperty(n))return!1;if(!i.hasOwnProperty(n)||t[n]!==i[n])return u.dependenciesFulfilled=!1,!0;u.dependenciesFulfilled=!0}):typeof t=="string"||typeof t=="number"?this.dependenciesFulfilled=i===t:typeof t=="boolean"&&(this.dependenciesFulfilled=t?i&&i.length>0:!i||i.length===0):this.dependenciesFulfilled=!1;this.dependenciesFulfilled!==e&&this.notify();f.style.display=this.dependenciesFulfilled?"block":"none"}},setContainer:function(n){this.container=n;this.schema.id&&this.container.setAttribute("data-schemaid",this.schema.id);this.schema.type&&typeof this.schema.type=="string"&&this.container.setAttribute("data-schematype",this.schema.type);this.container.setAttribute("data-schemapath",this.path)},preBuild:function(){},build:function(){},postBuild:function(){this.setupWatchListeners();this.addLinks();this.setValue(this.getDefault(),!0);this.updateHeaderText();this.register();this.onWatchedFieldChange()},setupWatchListeners:function(){var n=this,t,i,r,f,e,u;if(this.watched={},this.schema.vars&&(this.schema.watch=this.schema.vars),this.watched_values={},this.watch_listener=function(){n.refreshWatchedFieldValues()&&n.onWatchedFieldChange()},this.schema.hasOwnProperty("watch"))for(u in this.schema.watch)if(this.schema.watch.hasOwnProperty(u)){if(t=this.schema.watch[u],Array.isArray(t)){if(t.length<2)continue;i=[t[0]].concat(t[1].split("."))}else i=t.split("."),n.theme.closest(n.container,'[data-schemaid="'+i[0]+'"]')||i.unshift("#");if(r=i.shift(),r==="#"&&(r=n.jsoneditor.schema.id||"root"),f=n.theme.closest(n.container,'[data-schemaid="'+r+'"]'),!f)throw"Could not find ancestor node with id "+r;e=f.getAttribute("data-schemapath")+"."+i.join(".");n.jsoneditor.watch(e,n.watch_listener);n.watched[u]=e}this.schema.headerTemplate&&(this.header_template=this.jsoneditor.compileTemplate(this.schema.headerTemplate,this.template_engine))},addLinks:function(){if(!this.no_link_holder&&(this.link_holder=this.theme.getLinksHolder(),this.container.appendChild(this.link_holder),this.schema.links))for(var n=0;n<this.schema.links.length;n++)this.addLink(this.getLink(this.schema.links[n]))},getButton:function(n,t,i){var u="json-editor-btn-"+t,r;return t=this.iconlib?this.iconlib.getIcon(t):null,!t&&i&&(n=i,i=null),r=this.theme.getButton(n,t,i),r.className+=" "+u+" ",r},setButtonText:function(n,t,i,r){return i=this.iconlib?this.iconlib.getIcon(i):null,!i&&r&&(t=r,r=null),this.theme.setButtonText(n,t,i,r)},addLink:function(n){this.link_holder&&this.link_holder.appendChild(n)},getLink:function(n){var i,t,h=n.mediaType||"application/javascript",f=h.split("/")[0],e=this.jsoneditor.compileTemplate(n.href,this.template_engine),o=this.jsoneditor.compileTemplate(n.rel?n.rel:n.href,this.template_engine),r=null,s,u;return n.download&&(r=n.download),r&&r!==!0&&(r=this.jsoneditor.compileTemplate(r,this.template_engine)),f==="image"?(i=this.theme.getBlockLinkHolder(),t=document.createElement("a"),t.setAttribute("target","_blank"),s=document.createElement("img"),this.theme.createImageLink(i,t,s),this.link_watchers.push(function(n){var i=e(n),r=o(n);t.setAttribute("href",i);t.setAttribute("title",r||i);s.setAttribute("src",i)})):["audio","video"].indexOf(f)>=0?(i=this.theme.getBlockLinkHolder(),t=this.theme.getBlockLink(),t.setAttribute("target","_blank"),u=document.createElement(f),u.setAttribute("controls","controls"),this.theme.createMediaLink(i,t,u),this.link_watchers.push(function(n){var i=e(n),r=o(n);t.setAttribute("href",i);t.textContent=r||i;u.setAttribute("src",i)})):(t=i=this.theme.getBlockLink(),i.setAttribute("target","_blank"),i.textContent=n.rel,this.link_watchers.push(function(n){var t=e(n),r=o(n);i.setAttribute("href",t);i.textContent=r||t})),r&&t&&(r===!0?t.setAttribute("download",""):this.link_watchers.push(function(n){t.setAttribute("download",r(n))})),n.class&&(t.className=t.className+" "+n.class),i},refreshWatchedFieldValues:function(){var r,u,n;if(this.watched_values){var t={},i=!1,f=this;if(this.watched)for(n in this.watched)this.watched.hasOwnProperty(n)&&(u=f.jsoneditor.getEditor(this.watched[n]),r=u?u.getValue():null,f.watched_values[n]!==r&&(i=!0),t[n]=r);return t.self=this.getValue(),this.watched_values.self!==t.self&&(i=!0),this.watched_values=t,i}},getWatchedFieldValues:function(){return this.watched_values},updateHeaderText:function(){if(this.header)if(this.header.children.length){for(var n=0;n<this.header.childNodes.length;n++)if(this.header.childNodes[n].nodeType===3){this.header.childNodes[n].nodeValue=this.getHeaderText();break}}else this.header.textContent=this.getHeaderText()},getHeaderText:function(n){return this.header_text?this.header_text:n?this.schema.title:this.getTitle()},onWatchedFieldChange:function(){var n,r,t;if(this.header_template&&(n=i(this.getWatchedFieldValues(),{key:this.key,i:this.key,i0:this.key*1,i1:this.key*1+1,title:this.getTitle()}),r=this.header_template(n),r!==this.header_text&&(this.header_text=r,this.updateHeaderText(),this.notify())),this.link_watchers.length)for(n=this.getWatchedFieldValues(),t=0;t<this.link_watchers.length;t++)this.link_watchers[t](n)},setValue:function(n){this.value=n},getValue:function(){return this.dependenciesFulfilled?this.value:undefined},refreshValue:function(){},getChildEditors:function(){return!1},destroy:function(){var n=this;this.unregister(this);t(this.watched,function(t,i){n.jsoneditor.unwatch(i,n.watch_listener)});this.watched=null;this.watched_values=null;this.watch_listener=null;this.header_text=null;this.header_template=null;this.value=null;this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container);this.container=null;this.jsoneditor=null;this.schema=null;this.path=null;this.key=null;this.parent=null},getDefault:function(){if(this.schema["default"])return this.schema["default"];if(this.schema["enum"])return this.schema["enum"][0];var n=this.schema.type||this.schema.oneOf;if(n&&Array.isArray(n)&&(n=n[0]),n&&typeof n=="object"&&(n=n.type),n&&Array.isArray(n)&&(n=n[0]),typeof n=="string"){if(n==="number")return 0;if(n==="boolean")return!1;if(n==="integer")return 0;if(n==="string")return"";if(n==="object")return{};if(n==="array")return[]}return null},getTitle:function(){return this.schema.title||this.key},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},isEnabled:function(){return!this.disabled},isRequired:function(){return typeof this.schema.required=="boolean"?this.schema.required:this.parent&&this.parent.schema&&Array.isArray(this.parent.schema.required)?this.parent.schema.required.indexOf(this.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},getDisplayText:function(n){var u=[],i={},r;return t(n,function(n,t){t.title&&(i[t.title]=i[t.title]||0,i[t.title]++);t.description&&(i[t.description]=i[t.description]||0,i[t.description]++);t.format&&(i[t.format]=i[t.format]||0,i[t.format]++);t.type&&(i[t.type]=i[t.type]||0,i[t.type]++)}),t(n,function(n,t){var r;r=typeof t=="string"?t:t.title&&i[t.title]<=1?t.title:t.format&&i[t.format]<=1?t.format:t.type&&i[t.type]<=1?t.type:t.description&&i[t.description]<=1?t.descripton:t.title?t.title:t.format?t.format:t.type?t.type:t.description?t.description:JSON.stringify(t).length<50?JSON.stringify(t):"type";u.push(r)}),r={},t(u,function(n,t){r[t]=r[t]||0;r[t]++;i[t]>1&&(u[n]=t+" "+r[t])}),u},getOption:function(n){try{throw"getOption is deprecated";}catch(t){window.console.error(t)}return this.options[n]},showValidationErrors:function(){}});n.defaults.editors["null"]=n.AbstractEditor.extend({getValue:function(){return this.dependenciesFulfilled?null:undefined},setValue:function(){this.onChange()},getNumColumns:function(){return 2}});n.defaults.editors.string=n.AbstractEditor.extend({register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},setValue:function(n,t,i){var f=this,r,u;if((!this.template||i)&&(n===null||typeof n=="undefined"?n="":typeof n=="object"?n=JSON.stringify(n):typeof n!="string"&&(n=""+n),n!==this.serialized)&&(r=this.sanitize(n),this.input.value!==r)){this.input.value=r;this.sceditor_instance?this.sceditor_instance.val(r):this.SimpleMDE?this.SimpleMDE.value(r):this.ace_editor&&this.ace_editor.setValue(r);u=i||this.getValue()!==n;this.refreshValue();t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);this.adjust_height&&this.adjust_height(this.input);this.onChange(u)}},getNumColumns:function(){var t=Math.ceil(Math.max(this.getTitle().length,this.schema.maxLength||0,this.schema.minLength||0)/5),n;return n=this.input_type==="textarea"?6:["text","email"].indexOf(this.input_type)>=0?4:2,Math.min(12,Math.max(t,n))},build:function(){var n=this;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.format=this.schema.format,!this.format&&this.schema.media&&this.schema.media.type&&(this.format=this.schema.media.type.replace(/(^(application|text)\/(x-)?(script\.)?)|(-source$)/g,"")),!this.format&&this.options.default_format&&(this.format=this.options.default_format),this.options.format&&(this.format=this.options.format),this.format)if(this.format==="textarea")this.input_type="textarea",this.input=this.theme.getTextareaInput();else if(this.format==="range"){this.input_type="range";var t=this.schema.minimum||0,i=this.schema.maximum||Math.max(100,t+1),r=1;this.schema.multipleOf&&(t%this.schema.multipleOf&&(t=Math.ceil(t/this.schema.multipleOf)*this.schema.multipleOf),i%this.schema.multipleOf&&(i=Math.floor(i/this.schema.multipleOf)*this.schema.multipleOf),r=this.schema.multipleOf);this.input=this.theme.getRangeInput(t,i,r)}else["actionscript","batchfile","bbcode","c","c++","cpp","coffee","csharp","css","dart","django","ejs","erlang","golang","groovy","handlebars","haskell","haxe","html","ini","jade","java","javascript","json","less","lisp","lua","makefile","markdown","matlab","mysql","objectivec","pascal","perl","pgsql","php","python","r","ruby","sass","scala","scss","smarty","sql","stylus","svg","twig","vbscript","xml","yaml"].indexOf(this.format)>=0?(this.input_type=this.format,this.source_code=!0,this.input=this.theme.getTextareaInput()):(this.input_type=this.format,this.input=this.theme.getFormInputField(this.input_type));else this.input_type="text",this.input=this.theme.getFormInputField(this.input_type);typeof this.schema.maxLength!="undefined"&&this.input.setAttribute("maxlength",this.schema.maxLength);typeof this.schema.pattern!="undefined"?this.input.setAttribute("pattern",this.schema.pattern):typeof this.schema.minLength!="undefined"&&this.input.setAttribute("pattern",".{"+this.schema.minLength+",}");this.options.compact?this.container.className+=" compact":this.options.input_width&&(this.input.style.width=this.options.input_width);(this.schema.readOnly||this.schema.readonly||this.schema.template)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),n.schema.template){this.value=n.value;return}var i=this.value,r=n.sanitize(i);i!==r&&(this.value=r);n.is_dirty=!0;n.refreshValue();n.onChange(!0)});this.options.input_height&&(this.input.style.height=this.options.input_height);this.options.expand_height&&(this.adjust_height=function(n){if(n){var t,i=n.offsetHeight;if(n.offsetHeight<n.scrollHeight)for(t=0;n.offsetHeight<n.scrollHeight+3;){if(t>100)break;t++;i++;n.style.height=i+"px"}else{for(t=0;n.offsetHeight>=n.scrollHeight+3;){if(t>100)break;t++;i--;n.style.height=i+"px"}n.style.height=i+1+"px"}}},this.input.addEventListener("keyup",function(){n.adjust_height(this)}),this.input.addEventListener("change",function(){n.adjust_height(this)}),this.adjust_height());this.format&&this.input.setAttribute("data-schemaformat",this.format);this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton);this.container.appendChild(this.control);window.requestAnimationFrame(function(){n.input.parentNode&&n.afterInputReady();n.adjust_height&&n.adjust_height(n.input)});this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()},enable:function(){this.always_disabled||(this.input.disabled=!1,this._super())},disable:function(n){n&&(this.always_disabled=!0);this.input.disabled=!0;this._super()},afterInputReady:function(){var t=this,u,r;if(this.source_code)if(this.options.wysiwyg&&["html","bbcode"].indexOf(this.input_type)>=0&&window.jQuery&&window.jQuery.fn&&window.jQuery.fn.sceditor)u=i({},{plugins:t.input_type==="html"?"xhtml":"bbcode",emoticonsEnabled:!1,width:"100%",height:300},n.plugins.sceditor,t.options.sceditor_options||{}),window.jQuery(t.input).sceditor(u),t.sceditor_instance=window.jQuery(t.input).sceditor("instance"),t.sceditor_instance.blur(function(){var n=window.jQuery("<div>"+t.sceditor_instance.val()+"<\/div>");window.jQuery("#sceditor-start-marker,#sceditor-end-marker,.sceditor-nlf",n).remove();t.input.value=n.html();t.value=t.input.value;t.is_dirty=!0;t.onChange(!0)});else if(this.input_type==="markdown"&&window.SimpleMDE){u=i({},n.plugins.SimpleMDE,{element:this.input});this.SimpleMDE=new window.SimpleMDE(u);this.SimpleMDE.codemirror.on("change",function(){t.value=t.SimpleMDE.value();t.is_dirty=!0;t.onChange(!0)})}else if(window.ace){r=this.input_type;(r==="cpp"||r==="c++"||r==="c")&&(r="c_cpp");this.ace_container=document.createElement("div");this.ace_container.style.width="100%";this.ace_container.style.position="relative";this.ace_container.style.height="400px";this.input.parentNode.insertBefore(this.ace_container,this.input);this.input.style.display="none";this.ace_editor=window.ace.edit(this.ace_container);this.ace_editor.setValue(this.getValue());n.plugins.ace.theme&&this.ace_editor.setTheme("ace/theme/"+n.plugins.ace.theme);r=window.ace.require("ace/mode/"+r);r&&this.ace_editor.getSession().setMode(new r.Mode);this.ace_editor.on("change",function(){var n=t.ace_editor.getValue();t.input.value=n;t.refreshValue();t.is_dirty=!0;t.onChange(!0)})}t.theme.afterInputReady(t.input)},refreshValue:function(){this.value=this.input.value;typeof this.value!="string"&&(this.value="");this.serialized=this.value},destroy:function(){this.sceditor_instance?this.sceditor_instance.destroy():this.SimpleMDE?this.SimpleMDE.destroy():this.ace_editor&&this.ace_editor.destroy();this.template=null;this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this._super()},sanitize:function(n){return n},onWatchedFieldChange:function(){var t=this,n;this.template&&(n=this.getWatchedFieldValues(),this.setValue(this.template(n),!1,!0));this._super()},showValidationErrors:function(n){var r=this,i;(this.jsoneditor.options.show_errors==="always"||this.is_dirty||this.previous_error_setting!==this.jsoneditor.options.show_errors)&&(this.previous_error_setting=this.jsoneditor.options.show_errors,i=[],t(n,function(n,t){t.path===r.path&&i.push(t.message)}),i.length?this.theme.addInputError(this.input,i.join(". ")+"."):this.theme.removeInputError(this.input))}});n.defaults.editors.hidden=n.AbstractEditor.extend({register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},setValue:function(n,t,i){var f=this,r,u;if((!this.template||i)&&(n===null||typeof n=="undefined"?n="":typeof n=="object"?n=JSON.stringify(n):typeof n!="string"&&(n=""+n),n!==this.serialized)&&(r=this.sanitize(n),this.input.value!==r)){this.input.value=r;u=i||this.getValue()!==n;this.refreshValue();t?this.is_dirty=!1:this.jsoneditor.options.show_errors==="change"&&(this.is_dirty=!0);this.adjust_height&&this.adjust_height(this.input);this.onChange(u)}},getNumColumns:function(){return 2},enable:function(){this._super()},disable:function(){this._super()},refreshValue:function(){this.value=this.input.value;typeof this.value!="string"&&(this.value="");this.serialized=this.value},destroy:function(){this.template=null;this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this._super()},sanitize:function(n){return n},onWatchedFieldChange:function(){var t=this,n;this.template&&(n=this.getWatchedFieldValues(),this.setValue(this.template(n),!1,!0));this._super()},build:function(){var n=this;this.format=this.schema.format;!this.format&&this.options.default_format&&(this.format=this.options.default_format);this.options.format&&(this.format=this.options.format);this.input_type="hidden";this.input=this.theme.getFormInputField(this.input_type);this.format&&this.input.setAttribute("data-schemaformat",this.format);this.container.appendChild(this.input);this.schema.template?(this.template=this.jsoneditor.compileTemplate(this.schema.template,this.template_engine),this.refreshValue()):this.refreshValue()}});n.defaults.editors.number=n.defaults.editors.string.extend({build:function(){var n,t;this._super();typeof this.schema.minimum!="undefined"&&(n=this.schema.minimum,typeof this.schema.exclusiveMinimum!="undefined"&&(n+=1),this.input.setAttribute("min",n));typeof this.schema.maximum!="undefined"&&(t=this.schema.maximum,typeof this.schema.exclusiveMaximum!="undefined"&&(t-=1),this.input.setAttribute("max",t))},sanitize:function(n){return(n+"").replace(/[^0-9\.\-eE]/g,"")},getNumColumns:function(){return 2},getValue:function(){return this.dependenciesFulfilled?this.value===""?undefined:this.value*1:undefined}});n.defaults.editors.integer=n.defaults.editors.number.extend({sanitize:function(n){return n=n+"",n.replace(/[^0-9\-]/g,"")},getNumColumns:function(){return 2}});n.defaults.editors.rating=n.defaults.editors.integer.extend({build:function(){var n=this,i,s,l,f,e,r,h,c,u,o;for(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),s="json-editor-style-rating",l=document.getElementById(s),l||(f=document.createElement("style"),f.id=s,f.type="text/css",f.innerHTML="      .rating-container {        display: inline-block;        clear: both;      }            .rating {        float:left;      }            /* :not(:checked) is a filter, so that browsers that don’t support :checked don’t         follow these rules. Every browser that supports :checked also supports :not(), so         it doesn’t make the test unnecessarily selective */      .rating:not(:checked) > input {        position:absolute;        top:-9999px;        clip:rect(0,0,0,0);      }            .rating:not(:checked) > label {        float:right;        width:1em;        padding:0 .1em;        overflow:hidden;        white-space:nowrap;        cursor:pointer;        color:#ddd;      }            .rating:not(:checked) > label:before {        content: '★ ';      }            .rating > input:checked ~ label {        color: #FFB200;      }            .rating:not([readOnly]):not(:checked) > label:hover,      .rating:not([readOnly]):not(:checked) > label:hover ~ label {        color: #FFDA00;      }            .rating:not([readOnly]) > input:checked + label:hover,      .rating:not([readOnly]) > input:checked + label:hover ~ label,      .rating:not([readOnly]) > input:checked ~ label:hover,      .rating:not([readOnly]) > input:checked ~ label:hover ~ label,      .rating:not([readOnly]) > label:hover ~ input:checked ~ label {        color: #FF8C0D;      }            .rating:not([readOnly])  > label:active {        position:relative;        top:2px;        left:2px;      }",document.getElementsByTagName("head")[0].appendChild(f)),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),e=document.createElement("div"),e.className="rating-container",r=document.createElement("div"),r.setAttribute("name",this.formname),r.className="rating",e.appendChild(r),this.options.compact&&this.container.setAttribute("class",this.container.getAttribute("class")+" compact"),h=this.schema.maximum?this.schema.maximum:5,this.schema.exclusiveMaximum&&h--,this.inputs=[],i=h;i>0;i--)c=this.formname+i,u=this.theme.getFormInputField("radio"),u.setAttribute("id",c),u.setAttribute("value",i),u.setAttribute("name",this.formname),r.appendChild(u),this.inputs.push(u),o=document.createElement("label"),o.setAttribute("for",c),o.appendChild(document.createTextNode(i+(i==1?" star":" stars"))),r.appendChild(o);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,t(this.inputs,function(n,t){r.setAttribute("readOnly","readOnly");t.disabled=!0}));e.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),n.input.value=t.srcElement.value,n.is_dirty=!0,n.refreshValue(),n.watch_listener(),n.jsoneditor.notifyWatchers(n.path),n.parent)n.parent.onChildEditorChange(n);else n.jsoneditor.onChange()});this.control=this.theme.getFormControl(this.label,e,this.description);this.container.appendChild(this.control);this.refreshValue()},setValue:function(n){var r=this.sanitize(n),i;this.value!==r&&(i=this,t(this.inputs,function(n,t){if(t.value===r)return t.checked=!0,i.value=r,i.input.value=i.value,i.watch_listener(),i.jsoneditor.notifyWatchers(i.path),!1}))}});n.defaults.editors.object=n.AbstractEditor.extend({getDefault:function(){return i({},this.schema["default"]||{})},getChildEditors:function(){return this.editors},register:function(){if(this._super(),this.editors)for(var n in this.editors)this.editors.hasOwnProperty(n)&&this.editors[n].register()},unregister:function(){if(this._super(),this.editors)for(var n in this.editors)this.editors.hasOwnProperty(n)&&this.editors[n].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.maxwidth),3)},enable:function(){if(!this.always_disabled&&(this.editjson_button&&(this.editjson_button.disabled=!1),this.addproperty_button&&(this.addproperty_button.disabled=!1),this._super(),this.editors))for(var n in this.editors)this.editors.hasOwnProperty(n)&&this.editors[n].enable()},disable:function(n){if(n&&(this.always_disabled=!0),this.editjson_button&&(this.editjson_button.disabled=!0),this.addproperty_button&&(this.addproperty_button.disabled=!0),this.hideEditJSON(),this._super(),this.editors)for(var t in this.editors)this.editors.hasOwnProperty(t)&&this.editors[t].disable(n)},layoutEditors:function(){var u=this,i,r,e,n,f,s,h,c,o;if(this.row_container){if(this.property_order=Object.keys(this.editors),this.property_order=this.property_order.sort(function(n,t){var i=u.editors[n].schema.propertyOrder,r=u.editors[t].schema.propertyOrder;return typeof i!="number"&&(i=1e3),typeof r!="number"&&(r=1e3),i-r}),this.format==="grid"){for(n=[],t(this.property_order,function(t,i){var e=u.editors[i],f;if(!e.property_removed){var r=!1,s=e.options.hidden?0:e.options.grid_columns||e.getNumColumns(),o=e.options.hidden?0:e.container.offsetHeight;for(f=0;f<n.length;f++)n[f].width+s<=12&&(!o||n[f].minh*.5<o&&n[f].maxh*2>o)&&(r=f);r===!1&&(n.push({width:0,minh:999999,maxh:0,editors:[]}),r=n.length-1);n[r].editors.push({key:i,width:s,height:o});n[r].width+=s;n[r].minh=Math.min(n[r].minh,o);n[r].maxh=Math.max(n[r].maxh,o)}}),i=0;i<n.length;i++)if(n[i].width<12){for(f=!1,s=0,r=0;r<n[i].editors.length;r++)f===!1?f=r:n[i].editors[r].width>n[i].editors[f].width&&(f=r),n[i].editors[r].width*=12/n[i].width,n[i].editors[r].width=Math.floor(n[i].editors[r].width),s+=n[i].editors[r].width;s<12&&(n[i].editors[f].width+=12-s);n[i].width=12}if(this.layout===JSON.stringify(n))return!1;for(this.layout=JSON.stringify(n),e=document.createElement("div"),i=0;i<n.length;i++)for(h=this.theme.getGridRow(),e.appendChild(h),r=0;r<n[i].editors.length;r++)c=n[i].editors[r].key,o=this.editors[c],o.options.hidden?o.container.style.display="none":this.theme.setGridColumnSize(o.container,n[i].editors[r].width),h.appendChild(o.container)}else e=document.createElement("div"),t(this.property_order,function(n,t){var i=u.editors[t],r;i.property_removed||(r=u.theme.getGridRow(),e.appendChild(r),i.options.hidden?i.container.style.display="none":u.theme.setGridColumnSize(i.container,12),r.appendChild(i.container))});while(this.row_container.firstChild)this.row_container.removeChild(this.row_container.firstChild);this.row_container.appendChild(e)}},getPropertySchema:function(n){var t=this.schema.properties[n]||{},u,r,f;if(t=i({},t),u=this.schema.properties[n]?!0:!1,this.schema.patternProperties)for(r in this.schema.patternProperties)this.schema.patternProperties.hasOwnProperty(r)&&(f=new RegExp(r),f.test(n)&&(t.allOf=t.allOf||[],t.allOf.push(this.schema.patternProperties[r]),u=!0));return!u&&this.schema.additionalProperties&&typeof this.schema.additionalProperties=="object"&&(t=i({},this.schema.additionalProperties)),t},preBuild:function(){this._super();this.editors={};this.cached_editors={};var n=this;if(this.format=this.options.layout||this.options.object_layout||this.schema.format||this.jsoneditor.options.object_layout||"normal",this.schema.properties=this.schema.properties||{},this.minwidth=0,this.maxwidth=0,this.options.table_row)t(this.schema.properties,function(t,i){var u=n.jsoneditor.getEditorClass(i),r;n.editors[t]=n.jsoneditor.createEditor(u,{jsoneditor:n.jsoneditor,schema:i,path:n.path+"."+t,parent:n,compact:!0,required:!0});n.editors[t].preBuild();r=n.editors[t].options.hidden?0:n.editors[t].options.grid_columns||n.editors[t].getNumColumns();n.minwidth+=r;n.maxwidth+=r}),this.no_link_holder=!0;else if(this.options.table)throw"Not supported yet";else this.schema.defaultProperties||(this.jsoneditor.options.display_required_only||this.options.display_required_only?(this.schema.defaultProperties=[],t(this.schema.properties,function(t,i){n.isRequired({key:t,schema:i})&&n.schema.defaultProperties.push(t)})):n.schema.defaultProperties=Object.keys(n.schema.properties)),n.maxwidth+=1,t(this.schema.defaultProperties,function(t,i){n.addObjectProperty(i,!0);n.editors[i]&&(n.minwidth=Math.max(n.minwidth,n.editors[i].options.grid_columns||n.editors[i].getNumColumns()),n.maxwidth+=n.editors[i].options.grid_columns||n.editors[i].getNumColumns())});this.property_order=Object.keys(this.editors);this.property_order=this.property_order.sort(function(t,i){var r=n.editors[t].schema.propertyOrder,u=n.editors[i].schema.propertyOrder;return typeof r!="number"&&(r=1e3),typeof u!="number"&&(u=1e3),r-u})},build:function(){var n=this,i;if(this.options.table_row)this.editor_holder=this.container,t(this.editors,function(t,i){var r=n.theme.getTableCell();n.editor_holder.appendChild(r);i.setContainer(r);i.build();i.postBuild();n.editors[t].options.hidden&&(r.style.display="none");n.editors[t].options.input_width&&(r.style.width=n.editors[t].options.input_width)});else if(this.options.table)throw"Not supported yet";else this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.container.style.position="relative",this.editjson_holder=this.theme.getModal(),this.editjson_textarea=this.theme.getTextareaInput(),this.editjson_textarea.style.height="170px",this.editjson_textarea.style.width="300px",this.editjson_textarea.style.display="block",this.editjson_save=this.getButton("Save","save","Save"),this.editjson_save.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.saveJSON()}),this.editjson_cancel=this.getButton("Cancel","cancel","Cancel"),this.editjson_cancel.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.hideEditJSON()}),this.editjson_holder.appendChild(this.editjson_textarea),this.editjson_holder.appendChild(this.editjson_save),this.editjson_holder.appendChild(this.editjson_cancel),this.addproperty_holder=this.theme.getModal(),this.addproperty_list=document.createElement("div"),this.addproperty_list.style.width="295px",this.addproperty_list.style.maxHeight="160px",this.addproperty_list.style.padding="5px 0",this.addproperty_list.style.overflowY="auto",this.addproperty_list.style.overflowX="hidden",this.addproperty_list.style.paddingLeft="5px",this.addproperty_list.setAttribute("class","property-selector"),this.addproperty_add=this.getButton("add","add","add"),this.addproperty_input=this.theme.getFormInputField("text"),this.addproperty_input.setAttribute("placeholder","Property name..."),this.addproperty_input.style.width="220px",this.addproperty_input.style.marginBottom="0",this.addproperty_input.style.display="inline-block",this.addproperty_add.addEventListener("click",function(t){if(t.preventDefault(),t.stopPropagation(),n.addproperty_input.value){if(n.editors[n.addproperty_input.value]){window.alert("there is already a property with that name");return}n.addObjectProperty(n.addproperty_input.value);n.editors[n.addproperty_input.value]&&n.editors[n.addproperty_input.value].disable();n.onChange(!0)}}),this.addproperty_holder.appendChild(this.addproperty_list),this.addproperty_holder.appendChild(this.addproperty_input),this.addproperty_holder.appendChild(this.addproperty_add),i=document.createElement("div"),i.style.clear="both",this.addproperty_holder.appendChild(i),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.editor_holder=this.theme.getIndentedPanel(),this.container.appendChild(this.editor_holder),this.row_container=this.theme.getGridContainer(),this.editor_holder.appendChild(this.row_container),t(this.editors,function(t,i){var r=n.theme.getGridColumn();n.row_container.appendChild(r);i.setContainer(r);i.build();i.postBuild()}),this.title_controls=this.theme.getHeaderButtonHolder(),this.editjson_controls=this.theme.getHeaderButtonHolder(),this.addproperty_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.title.appendChild(this.editjson_controls),this.title.appendChild(this.addproperty_controls),this.collapsed=!1,this.toggle_button=this.getButton("","collapse",this.translate("button_collapse")),this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.collapsed?(n.editor_holder.style.display="",n.collapsed=!1,n.setButtonText(n.toggle_button,"","collapse",n.translate("button_collapse"))):(n.editor_holder.style.display="none",n.collapsed=!0,n.setButtonText(n.toggle_button,"","expand",n.translate("button_expand")))}),this.options.collapsed&&u(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse!="undefined"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"),this.editjson_button=this.getButton("JSON","edit","Edit JSON"),this.editjson_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.toggleEditJSON()}),this.editjson_controls.appendChild(this.editjson_button),this.editjson_controls.appendChild(this.editjson_holder),this.schema.options&&typeof this.schema.options.disable_edit_json!="undefined"?this.schema.options.disable_edit_json&&(this.editjson_button.style.display="none"):this.jsoneditor.options.disable_edit_json&&(this.editjson_button.style.display="none"),this.addproperty_button=this.getButton("Properties","edit","Object Properties"),this.addproperty_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.toggleAddProperty()}),this.addproperty_controls.appendChild(this.addproperty_button),this.addproperty_controls.appendChild(this.addproperty_holder),this.refreshAddProperties();this.options.table_row?(this.editor_holder=this.container,t(this.property_order,function(t,i){n.editor_holder.appendChild(n.editors[i].container)})):(this.layoutEditors(),this.layoutEditors())},showEditJSON:function(){this.editjson_holder&&(this.hideAddProperty(),this.editjson_holder.style.left=this.editjson_button.offsetLeft+"px",this.editjson_holder.style.top=this.editjson_button.offsetTop+this.editjson_button.offsetHeight+"px",this.editjson_textarea.value=JSON.stringify(this.getValue(),null,2),this.disable(),this.editjson_holder.style.display="",this.editjson_button.disabled=!1,this.editing_json=!0)},hideEditJSON:function(){this.editjson_holder&&this.editing_json&&(this.editjson_holder.style.display="none",this.enable(),this.editing_json=!1)},saveJSON:function(){if(this.editjson_holder)try{var n=JSON.parse(this.editjson_textarea.value);this.setValue(n);this.hideEditJSON()}catch(t){window.alert("invalid JSON");throw t;}},toggleEditJSON:function(){this.editing_json?this.hideEditJSON():this.showEditJSON()},insertPropertyControlUsingPropertyOrder:function(n,t,i){var r,u,f;for(this.schema.properties[n]&&(r=this.schema.properties[n].propertyOrder),typeof r!="number"&&(r=1e3),t.propertyOrder=r,u=0;u<i.childNodes.length;u++)if(f=i.childNodes[u],t.propertyOrder<f.propertyOrder){this.addproperty_list.insertBefore(t,f);t=null;break}t&&this.addproperty_list.appendChild(t)},addPropertyCheckbox:function(n){var i=this,t,u,f,r;return t=i.theme.getCheckbox(),t.style.width="auto",f=this.schema.properties[n]&&this.schema.properties[n].title?this.schema.properties[n].title:n,u=i.theme.getCheckboxLabel(f),r=i.theme.getFormControl(u,t),r.style.paddingBottom=r.style.marginBottom=r.style.paddingTop=r.style.marginTop=0,r.style.height="auto",this.insertPropertyControlUsingPropertyOrder(n,r,this.addproperty_list),t.checked=n in this.editors,t.addEventListener("change",function(){t.checked?i.addObjectProperty(n):i.removeObjectProperty(n);i.onChange(!0)}),i.addproperty_checkboxes[n]=t,t},showAddProperty:function(){this.addproperty_holder&&(this.hideEditJSON(),this.addproperty_holder.style.left=this.addproperty_button.offsetLeft+"px",this.addproperty_holder.style.top=this.addproperty_button.offsetTop+this.addproperty_button.offsetHeight+"px",this.disable(),this.adding_property=!0,this.addproperty_button.disabled=!1,this.addproperty_holder.style.display="",this.refreshAddProperties())},hideAddProperty:function(){this.addproperty_holder&&this.adding_property&&(this.addproperty_holder.style.display="none",this.enable(),this.adding_property=!1)},toggleAddProperty:function(){this.adding_property?this.hideAddProperty():this.showAddProperty()},removeObjectProperty:function(n){this.editors[n]&&(this.editors[n].unregister(),delete this.editors[n],this.refreshValue(),this.layoutEditors())},addObjectProperty:function(n,t){var i=this,r,f,u;if(!this.editors[n]){if(this.cached_editors[n]){if(this.editors[n]=this.cached_editors[n],t)return;this.editors[n].register()}else{if(!this.canHaveAdditionalProperties()&&(!this.schema.properties||!this.schema.properties[n]))return;r=i.getPropertySchema(n);f=i.jsoneditor.getEditorClass(r);i.editors[n]=i.jsoneditor.createEditor(f,{jsoneditor:i.jsoneditor,schema:r,path:i.path+"."+n,parent:i});i.editors[n].preBuild();t||(u=i.theme.getChildEditorHolder(),i.editor_holder.appendChild(u),i.editors[n].setContainer(u),i.editors[n].build(),i.editors[n].postBuild());i.cached_editors[n]=i.editors[n]}t||(i.refreshValue(),i.layoutEditors())}},onChildEditorChange:function(n){this.refreshValue();this._super(n)},canHaveAdditionalProperties:function(){return typeof this.schema.additionalProperties=="boolean"?this.schema.additionalProperties:!this.jsoneditor.options.no_additional_properties},destroy:function(){t(this.cached_editors,function(n,t){t.destroy()});this.editor_holder&&(this.editor_holder.innerHTML="");this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.error_holder&&this.error_holder.parentNode&&this.error_holder.parentNode.removeChild(this.error_holder);this.editors=null;this.cached_editors=null;this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder);this.editor_holder=null;this._super()},getValue:function(){var n,t;if(!this.dependenciesFulfilled)return undefined;if(n=this._super(),this.jsoneditor.options.remove_empty_properties||this.options.remove_empty_properties)for(t in n)n.hasOwnProperty(t)&&(typeof n[t]=="undefined"||n[t]===""||Object.keys(n[t]).length==0&&n[t].constructor==Object)&&delete n[t];return n},refreshValue:function(){var t,n;this.value={};t=this;for(n in this.editors)this.editors.hasOwnProperty(n)&&(this.value[n]=this.editors[n].getValue());this.adding_property&&this.refreshAddProperties()},refreshAddProperties:function(){if(this.options.disable_properties||this.options.disable_properties!==!1&&this.jsoneditor.options.disable_properties){this.addproperty_controls.style.display="none";return}var i=!1,u=!1,r=0,n,t=!1;for(n in this.editors)this.editors.hasOwnProperty(n)&&r++;i=this.canHaveAdditionalProperties()&&!(typeof this.schema.maxProperties!="undefined"&&r>=this.schema.maxProperties);this.addproperty_checkboxes&&(this.addproperty_list.innerHTML="");this.addproperty_checkboxes={};for(n in this.cached_editors)this.cached_editors.hasOwnProperty(n)&&(this.addPropertyCheckbox(n),this.isRequired(this.cached_editors[n])&&n in this.editors&&(this.addproperty_checkboxes[n].disabled=!0),typeof this.schema.minProperties!="undefined"&&r<=this.schema.minProperties?(this.addproperty_checkboxes[n].disabled=this.addproperty_checkboxes[n].checked,this.addproperty_checkboxes[n].checked||(t=!0)):n in this.editors?(t=!0,u=!0):i||this.schema.properties.hasOwnProperty(n)?(this.addproperty_checkboxes[n].disabled=!1,t=!0):this.addproperty_checkboxes[n].disabled=!0);this.canHaveAdditionalProperties()&&(t=!0);for(n in this.schema.properties)this.schema.properties.hasOwnProperty(n)&&(this.cached_editors[n]||(t=!0,this.addPropertyCheckbox(n)));t?this.canHaveAdditionalProperties()?this.addproperty_add.disabled=i?!1:!0:(this.addproperty_add.style.display="none",this.addproperty_input.style.display="none"):(this.hideAddProperty(),this.addproperty_controls.style.display="none")},isRequired:function(n){return typeof n.schema.required=="boolean"?n.schema.required:Array.isArray(this.schema.required)?this.schema.required.indexOf(n.key)>-1:this.jsoneditor.options.required_by_default?!0:!1},setValue:function(n,i){var r=this;n=n||{};(typeof n!="object"||Array.isArray(n))&&(n={});t(this.cached_editors,function(t,u){typeof n[t]!="undefined"?(r.addObjectProperty(t),u.setValue(n[t],i)):i||r.isRequired(u)?u.setValue(u.getDefault(),i):r.removeObjectProperty(t)});t(n,function(n,t){r.cached_editors[n]||(r.addObjectProperty(n),r.editors[n]&&r.editors[n].setValue(t,i))});this.refreshValue();this.layoutEditors();this.onChange()},showValidationErrors:function(n){var r=this,i=[],u=[],f;t(n,function(n,t){t.path===r.path?i.push(t):u.push(t)});this.error_holder&&(i.length?(f=[],this.error_holder.innerHTML="",this.error_holder.style.display="",t(i,function(n,t){r.error_holder.appendChild(r.theme.getErrorMessage(t.message))})):this.error_holder.style.display="none");this.options.table_row&&(i.length?this.theme.addTableRowError(this.container):this.theme.removeTableRowError(this.container));t(this.editors,function(n,t){t.showValidationErrors(u)})}});n.defaults.editors.array=n.AbstractEditor.extend({getDefault:function(){return this.schema["default"]||[]},register:function(){if(this._super(),this.rows)for(var n=0;n<this.rows.length;n++)this.rows[n].register()},unregister:function(){if(this._super(),this.rows)for(var n=0;n<this.rows.length;n++)this.rows[n].unregister()},getNumColumns:function(){var n=this.getItemInfo(0);return this.tabs_holder?Math.max(Math.min(12,n.width+2),4):n.width},enable:function(){if(!this.always_disabled){if(this.add_row_button&&(this.add_row_button.disabled=!1),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!1),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!1),this.rows)for(var n=0;n<this.rows.length;n++)this.rows[n].enable(),this.rows[n].moveup_button&&(this.rows[n].moveup_button.disabled=!1),this.rows[n].movedown_button&&(this.rows[n].movedown_button.disabled=!1),this.rows[n].delete_button&&(this.rows[n].delete_button.disabled=!1);this._super()}},disable:function(n){if(n&&(this.always_disabled=!0),this.add_row_button&&(this.add_row_button.disabled=!0),this.remove_all_rows_button&&(this.remove_all_rows_button.disabled=!0),this.delete_last_row_button&&(this.delete_last_row_button.disabled=!0),this.rows)for(var t=0;t<this.rows.length;t++)this.rows[t].disable(n),this.rows[t].moveup_button&&(this.rows[t].moveup_button.disabled=!0),this.rows[t].movedown_button&&(this.rows[t].movedown_button.disabled=!0),this.rows[t].delete_button&&(this.rows[t].delete_button.disabled=!0);this._super()},preBuild:function(){this._super();this.rows=[];this.row_cache=[];this.hide_delete_buttons=this.options.disable_array_delete||this.jsoneditor.options.disable_array_delete;this.hide_delete_all_rows_buttons=this.hide_delete_buttons||this.options.disable_array_delete_all_rows||this.jsoneditor.options.disable_array_delete_all_rows;this.hide_delete_last_row_buttons=this.hide_delete_buttons||this.options.disable_array_delete_last_row||this.jsoneditor.options.disable_array_delete_last_row;this.hide_move_buttons=this.options.disable_array_reorder||this.jsoneditor.options.disable_array_reorder;this.hide_add_button=this.options.disable_array_add||this.jsoneditor.options.disable_array_add;this.show_copy_button=this.options.enable_array_copy||this.jsoneditor.options.enable_array_copy},build:function(){var n=this;this.options.compact?(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder)):(this.header=document.createElement("span"),this.header.textContent=this.getTitle(),this.title=this.theme.getHeader(this.header),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.error_holder=document.createElement("div"),this.container.appendChild(this.error_holder),this.schema.format==="tabs"?(this.controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.controls),this.tabs_holder=this.theme.getTabHolder(),this.container.appendChild(this.tabs_holder),this.row_holder=this.theme.getTabContentHolder(this.tabs_holder),this.active_tab=null):(this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.row_holder=document.createElement("div"),this.panel.appendChild(this.row_holder),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls)));this.addControls()},onChildEditorChange:function(n){this.refreshValue();this.refreshTabs(!0);this._super(n)},getItemTitle:function(){if(!this.item_title)if(this.schema.items&&!Array.isArray(this.schema.items)){var n=this.jsoneditor.expandRefs(this.schema.items);this.item_title=n.title||"item"}else this.item_title="item";return this.item_title},getItemSchema:function(n){if(Array.isArray(this.schema.items))if(n>=this.schema.items.length){if(this.schema.additionalItems===!0)return{};if(this.schema.additionalItems)return i({},this.schema.additionalItems)}else return i({},this.schema.items[n]);else return this.schema.items?i({},this.schema.items):{}},getItemInfo:function(n){var t=this.getItemSchema(n),i;return(this.item_info=this.item_info||{},i=JSON.stringify(t),typeof this.item_info[i]!="undefined")?this.item_info[i]:(t=this.jsoneditor.expandRefs(t),this.item_info[i]={title:t.title||"item","default":t["default"],width:12,child_editors:t.properties||t.items},this.item_info[i])},getElementEditor:function(n){var u=this.getItemInfo(n),i=this.getItemSchema(n),f,r,t;return i=this.jsoneditor.expandRefs(i),i.title=u.title+" "+(n+1),f=this.jsoneditor.getEditorClass(i),r=this.tabs_holder?this.theme.getTabContent():u.child_editors?this.theme.getChildEditorHolder():this.theme.getIndentedPanel(),this.row_holder.appendChild(r),t=this.jsoneditor.createEditor(f,{jsoneditor:this.jsoneditor,schema:i,container:r,path:this.path+"."+n,parent:this,required:!0}),t.preBuild(),t.build(),t.postBuild(),t.title_controls||(t.array_controls=this.theme.getButtonHolder(),r.appendChild(t.array_controls)),t},destroy:function(){this.empty(!0);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder);this.controls&&this.controls.parentNode&&this.controls.parentNode.removeChild(this.controls);this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel);this.rows=this.row_cache=this.title=this.description=this.row_holder=this.panel=this.controls=null;this._super()},empty:function(n){if(this.rows){var i=this;t(this.rows,function(t,r){n&&(r.tab&&r.tab.parentNode&&r.tab.parentNode.removeChild(r.tab),i.destroyRow(r,!0),i.row_cache[t]=null);i.rows[t]=null});i.rows=[];n&&(i.row_cache=[])}},destroyRow:function(n,t){var i=n.container;t?(n.destroy(),i.parentNode&&i.parentNode.removeChild(i),n.tab&&n.tab.parentNode&&n.tab.parentNode.removeChild(n.tab)):(n.tab&&(n.tab.style.display="none"),i.style.display="none",n.unregister())},getMax:function(){return Array.isArray(this.schema.items)&&this.schema.additionalItems===!1?Math.min(this.schema.items.length,this.schema.maxItems||Infinity):this.schema.maxItems||Infinity},refreshTabs:function(n){var i=this;t(this.rows,function(t,r){r.tab&&(n?r.tab_text.textContent=r.getHeaderText():r.tab===i.active_tab?(i.theme.markTabActive(r.tab),r.container.style.display=""):(i.theme.markTabInactive(r.tab),r.container.style.display="none"))})},setValue:function(n,i){var e,r,u,f;if(n=n||[],Array.isArray(n)||(n=[n]),e=JSON.stringify(n),e!==this.serialized){if(this.schema.minItems)while(n.length<this.schema.minItems)n.push(this.getItemInfo(n.length)["default"]);for(this.getMax()&&n.length>this.getMax()&&(n=n.slice(0,this.getMax())),r=this,t(n,function(n,t){r.rows[n]?r.rows[n].setValue(t,i):r.row_cache[n]?(r.rows[n]=r.row_cache[n],r.rows[n].setValue(t,i),r.rows[n].container.style.display="",r.rows[n].tab&&(r.rows[n].tab.style.display=""),r.rows[n].register()):r.addRow(t,i)}),u=n.length;u<r.rows.length;u++)r.destroyRow(r.rows[u]),r.rows[u]=null;r.rows=r.rows.slice(0,n.length);f=null;t(r.rows,function(n,t){if(t.tab===r.active_tab)return f=t.tab,!1});!f&&r.rows.length&&(f=r.rows[0].tab);r.active_tab=f;r.refreshValue(i);r.refreshTabs(!0);r.refreshTabs();r.onChange()}},refreshValue:function(n){var u=this,f=this.value?this.value.length:0,r,i;this.value=[];t(this.rows,function(n,t){u.value[n]=t.getValue()});(f!==this.value.length||n)&&(r=this.schema.minItems&&this.schema.minItems>=this.rows.length,t(this.rows,function(n,t){t.movedown_button&&(t.movedown_button.style.display=n===u.rows.length-1?"none":"");t.delete_button&&(t.delete_button.style.display=r?"none":"");u.value[n]=t.getValue()}),i=!1,this.value.length?this.value.length===1?(this.remove_all_rows_button.style.display="none",r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",i=!0)):(r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",i=!0),r||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",i=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none"),this.getMax()&&this.getMax()<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",i=!0),this.controls.style.display=!this.collapsed&&i?"inline-block":"none")},addRow:function(n,i){var r=this,u=this.rows.length,f;r.rows[u]=this.getElementEditor(u);r.row_cache[u]=r.rows[u];r.tabs_holder&&(r.rows[u].tab_text=document.createElement("span"),r.rows[u].tab_text.textContent=r.rows[u].getHeaderText(),r.rows[u].tab=r.theme.getTab(r.rows[u].tab_text),r.rows[u].tab.addEventListener("click",function(n){r.active_tab=r.rows[u].tab;r.refreshTabs();n.preventDefault();n.stopPropagation()}),r.theme.addTab(r.tabs_holder,r.rows[u].tab));f=r.rows[u].title_controls||r.rows[u].array_controls;r.hide_delete_buttons||(r.rows[u].delete_button=this.getButton(r.getItemTitle(),"delete",this.translate("button_delete_row_title",[r.getItemTitle()])),r.rows[u].delete_button.className+=" delete",r.rows[u].delete_button.setAttribute("data-i",u),r.rows[u].delete_button.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();var f=this.getAttribute("data-i")*1,e=r.getValue(),u=[],i=null;t(e,function(n,t){if(n===f){r.rows[n].tab===r.active_tab&&(r.rows[n+1]?i=r.rows[n].tab:n&&(i=r.rows[n-1].tab));return}u.push(t)});r.setValue(u);i&&(r.active_tab=i,r.refreshTabs());r.onChange(!0)}),f&&f.appendChild(r.rows[u].delete_button));r.show_copy_button&&(r.rows[u].copy_button=this.getButton(r.getItemTitle(),"copy","Copy "+r.getItemTitle()),r.rows[u].copy_button.className+=" copy",r.rows[u].copy_button.setAttribute("data-i",u),r.rows[u].copy_button.addEventListener("click",function(n){var i=r.getValue(),u;n.preventDefault();n.stopPropagation();u=this.getAttribute("data-i")*1;t(i,function(n,t){if(n===u){i.push(t);return}});r.setValue(i);r.refreshValue(!0);r.onChange(!0)}),f.appendChild(r.rows[u].copy_button));u&&!r.hide_move_buttons&&(r.rows[u].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),r.rows[u].moveup_button.className+=" moveup",r.rows[u].moveup_button.setAttribute("data-i",u),r.rows[u].moveup_button.addEventListener("click",function(n){var t,i,u;if(n.preventDefault(),n.stopPropagation(),t=this.getAttribute("data-i")*1,!(t<=0)){i=r.getValue();u=i[t-1];i[t-1]=i[t];i[t]=u;r.setValue(i);r.active_tab=r.rows[t-1].tab;r.refreshTabs();r.onChange(!0)}}),f&&f.appendChild(r.rows[u].moveup_button));r.hide_move_buttons||(r.rows[u].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),r.rows[u].movedown_button.className+=" movedown",r.rows[u].movedown_button.setAttribute("data-i",u),r.rows[u].movedown_button.addEventListener("click",function(n){var t,i,u;if(n.preventDefault(),n.stopPropagation(),t=this.getAttribute("data-i")*1,i=r.getValue(),!(t>=i.length-1)){u=i[t+1];i[t+1]=i[t];i[t]=u;r.setValue(i);r.active_tab=r.rows[t+1].tab;r.refreshTabs();r.onChange(!0)}}),f&&f.appendChild(r.rows[u].movedown_button));n&&r.rows[u].setValue(n,i);r.refreshTabs()},addControls:function(){var n=this,t,i;this.collapsed=!1;this.toggle_button=this.getButton("","collapse",this.translate("button_collapse"));this.title_controls.appendChild(this.toggle_button);t=n.row_holder.style.display;i=n.controls.style.display;this.toggle_button.addEventListener("click",function(r){r.preventDefault();r.stopPropagation();n.collapsed?(n.collapsed=!1,n.panel&&(n.panel.style.display=""),n.row_holder.style.display=t,n.tabs_holder&&(n.tabs_holder.style.display=""),n.controls.style.display=i,n.setButtonText(this,"","collapse",n.translate("button_collapse"))):(n.collapsed=!0,n.row_holder.style.display="none",n.tabs_holder&&(n.tabs_holder.style.display="none"),n.controls.style.display="none",n.panel&&(n.panel.style.display="none"),n.setButtonText(this,"","expand",n.translate("button_expand")))});this.options.collapsed&&u(this.toggle_button,"click");this.schema.options&&typeof this.schema.options.disable_collapse!="undefined"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none");this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()]));this.add_row_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();var i=n.rows.length;n.row_cache[i]?(n.rows[i]=n.row_cache[i],n.rows[i].setValue(n.rows[i].getDefault(),!0),n.rows[i].container.style.display="",n.rows[i].tab&&(n.rows[i].tab.style.display=""),n.rows[i].register()):n.addRow();n.active_tab=n.rows[i].tab;n.refreshTabs();n.refreshValue();n.onChange(!0)});n.controls.appendChild(this.add_row_button);this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()]));this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();var r=n.getValue(),i=null;n.rows.length>1&&n.rows[n.rows.length-1].tab===n.active_tab&&(i=n.rows[n.rows.length-2].tab);r.pop();n.setValue(r);i&&(n.active_tab=i,n.refreshTabs());n.onChange(!0)});n.controls.appendChild(this.delete_last_row_button);this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title"));this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.setValue([]);n.onChange(!0)});n.controls.appendChild(this.remove_all_rows_button);n.tabs&&(this.add_row_button.style.width="100%",this.add_row_button.style.textAlign="left",this.add_row_button.style.marginBottom="3px",this.delete_last_row_button.style.width="100%",this.delete_last_row_button.style.textAlign="left",this.delete_last_row_button.style.marginBottom="3px",this.remove_all_rows_button.style.width="100%",this.remove_all_rows_button.style.textAlign="left",this.remove_all_rows_button.style.marginBottom="3px")},showValidationErrors:function(n){var i=this,r=[],u=[],f;t(n,function(n,t){t.path===i.path?r.push(t):u.push(t)});this.error_holder&&(r.length?(f=[],this.error_holder.innerHTML="",this.error_holder.style.display="",t(r,function(n,t){i.error_holder.appendChild(i.theme.getErrorMessage(t.message))})):this.error_holder.style.display="none");t(this.rows,function(n,t){t.showValidationErrors(u)})}});n.defaults.editors.table=n.defaults.editors.array.extend({register:function(){if(this._super(),this.rows)for(var n=0;n<this.rows.length;n++)this.rows[n].register()},unregister:function(){if(this._super(),this.rows)for(var n=0;n<this.rows.length;n++)this.rows[n].unregister()},getNumColumns:function(){return Math.max(Math.min(12,this.width),3)},preBuild:function(){var n=this.jsoneditor.expandRefs(this.schema.items||{});this.item_title=n.title||"row";this.item_default=n["default"]||null;this.item_has_child_editors=n.properties||n.items;this.width=12;this._super()},build:function(){var n=this,t,r,u,i,f;if(this.table=this.theme.getTable(),this.container.appendChild(this.table),this.thead=this.theme.getTableHead(),this.table.appendChild(this.thead),this.header_row=this.theme.getTableRow(),this.thead.appendChild(this.header_row),this.row_holder=this.theme.getTableBody(),this.table.appendChild(this.row_holder),t=this.getElementEditor(0,!0),this.item_default=t.getDefault(),this.width=t.getNumColumns()+2,this.options.compact?(this.panel=document.createElement("div"),this.container.appendChild(this.panel)):(this.title=this.theme.getHeader(this.getTitle()),this.container.appendChild(this.title),this.title_controls=this.theme.getHeaderButtonHolder(),this.title.appendChild(this.title_controls),this.schema.description&&(this.description=this.theme.getDescription(this.schema.description),this.container.appendChild(this.description)),this.panel=this.theme.getIndentedPanel(),this.container.appendChild(this.panel),this.error_holder=document.createElement("div"),this.panel.appendChild(this.error_holder)),this.panel.appendChild(this.table),this.controls=this.theme.getButtonHolder(),this.panel.appendChild(this.controls),this.item_has_child_editors)for(r=t.getChildEditors(),u=t.property_order||Object.keys(r),i=0;i<u.length;i++)f=n.theme.getTableHeaderCell(r[u[i]].getTitle()),r[u[i]].options.hidden&&(f.style.display="none"),n.header_row.appendChild(f);else n.header_row.appendChild(n.theme.getTableHeaderCell(this.item_title));t.destroy();this.row_holder.innerHTML="";this.controls_header_cell=n.theme.getTableHeaderCell(" ");n.header_row.appendChild(this.controls_header_cell);this.addControls()},onChildEditorChange:function(){this.refreshValue();this._super()},getItemDefault:function(){return i({},{"default":this.item_default})["default"]},getItemTitle:function(){return this.item_title},getElementEditor:function(n,t){var e=i({},this.schema.items),o=this.jsoneditor.getEditorClass(e,this.jsoneditor),u=this.row_holder.appendChild(this.theme.getTableRow()),f=u,r;return this.item_has_child_editors||(f=this.theme.getTableCell(),u.appendChild(f)),r=this.jsoneditor.createEditor(o,{jsoneditor:this.jsoneditor,schema:e,container:f,path:this.path+"."+n,parent:this,compact:!0,table_row:!0}),r.preBuild(),t||(r.build(),r.postBuild(),r.controls_cell=u.appendChild(this.theme.getTableCell()),r.row=u,r.table_controls=this.theme.getButtonHolder(),r.controls_cell.appendChild(r.table_controls),r.table_controls.style.margin=0,r.table_controls.style.padding=0),r},destroy:function(){this.innerHTML="";this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.row_holder&&this.row_holder.parentNode&&this.row_holder.parentNode.removeChild(this.row_holder);this.table&&this.table.parentNode&&this.table.parentNode.removeChild(this.table);this.panel&&this.panel.parentNode&&this.panel.parentNode.removeChild(this.panel);this.rows=this.title=this.description=this.row_holder=this.table=this.panel=null;this._super()},setValue:function(n,i){var o,f,r,u,e;if(n=n||[],this.schema.minItems)while(n.length<this.schema.minItems)n.push(this.getItemDefault());if(this.schema.maxItems&&n.length>this.schema.maxItems&&(n=n.slice(0,this.schema.maxItems)),o=JSON.stringify(n),o!==this.serialized){for(f=!1,r=this,t(n,function(n,t){r.rows[n]?r.rows[n].setValue(t):(r.addRow(t),f=!0)}),u=n.length;u<r.rows.length;u++)e=r.rows[u].container,r.item_has_child_editors||r.rows[u].row.parentNode.removeChild(r.rows[u].row),r.rows[u].destroy(),e.parentNode&&e.parentNode.removeChild(e),r.rows[u]=null,f=!0;r.rows=r.rows.slice(0,n.length);r.refreshValue();(f||i)&&r.refreshRowButtons();r.onChange()}},refreshRowButtons:function(){var u=this,r=this.schema.minItems&&this.schema.minItems>=this.rows.length,i=!1,n;t(this.rows,function(n,t){t.movedown_button&&(n===u.rows.length-1?t.movedown_button.style.display="none":(i=!0,t.movedown_button.style.display=""));t.delete_button&&(r?t.delete_button.style.display="none":(i=!0,t.delete_button.style.display=""));t.moveup_button&&(i=!0)});t(this.rows,function(n,t){t.controls_cell.style.display=i?"":"none"});this.controls_header_cell.style.display=i?"":"none";n=!1;this.value.length?this.value.length===1?(this.table.style.display="",this.remove_all_rows_button.style.display="none",r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",n=!0)):(this.table.style.display="",r||this.hide_delete_last_row_buttons?this.delete_last_row_button.style.display="none":(this.delete_last_row_button.style.display="",n=!0),r||this.hide_delete_all_rows_buttons?this.remove_all_rows_button.style.display="none":(this.remove_all_rows_button.style.display="",n=!0)):(this.delete_last_row_button.style.display="none",this.remove_all_rows_button.style.display="none",this.table.style.display="none");this.schema.maxItems&&this.schema.maxItems<=this.rows.length||this.hide_add_button?this.add_row_button.style.display="none":(this.add_row_button.style.display="",n=!0);this.controls.style.display=n?"":"none"},refreshValue:function(){var n=this;this.value=[];t(this.rows,function(t,i){n.value[t]=i.getValue()});this.serialized=JSON.stringify(this.value)},addRow:function(n){var i=this,r=this.rows.length,u;i.rows[r]=this.getElementEditor(r);u=i.rows[r].table_controls;this.hide_delete_buttons||(i.rows[r].delete_button=this.getButton("","delete",this.translate("button_delete_row_title_short")),i.rows[r].delete_button.className+=" delete",i.rows[r].delete_button.setAttribute("data-i",r),i.rows[r].delete_button.addEventListener("click",function(n){n.preventDefault();n.stopPropagation();var u=this.getAttribute("data-i")*1,f=i.getValue(),r=[];t(f,function(n,t){n!==u&&r.push(t)});i.setValue(r);i.onChange(!0)}),u.appendChild(i.rows[r].delete_button));r&&!this.hide_move_buttons&&(i.rows[r].moveup_button=this.getButton("","moveup",this.translate("button_move_up_title")),i.rows[r].moveup_button.className+=" moveup",i.rows[r].moveup_button.setAttribute("data-i",r),i.rows[r].moveup_button.addEventListener("click",function(n){var t,r,u;if(n.preventDefault(),n.stopPropagation(),t=this.getAttribute("data-i")*1,!(t<=0)){r=i.getValue();u=r[t-1];r[t-1]=r[t];r[t]=u;i.setValue(r);i.onChange(!0)}}),u.appendChild(i.rows[r].moveup_button));this.hide_move_buttons||(i.rows[r].movedown_button=this.getButton("","movedown",this.translate("button_move_down_title")),i.rows[r].movedown_button.className+=" movedown",i.rows[r].movedown_button.setAttribute("data-i",r),i.rows[r].movedown_button.addEventListener("click",function(n){var r,t,u;if(n.preventDefault(),n.stopPropagation(),r=this.getAttribute("data-i")*1,t=i.getValue(),!(r>=t.length-1)){u=t[r+1];t[r+1]=t[r];t[r]=u;i.setValue(t);i.onChange(!0)}}),u.appendChild(i.rows[r].movedown_button));n&&i.rows[r].setValue(n)},addControls:function(){var n=this;this.collapsed=!1;this.toggle_button=this.getButton("","collapse",this.translate("button_collapse"));this.title_controls&&(this.title_controls.appendChild(this.toggle_button),this.toggle_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.collapsed?(n.collapsed=!1,n.panel.style.display="",n.setButtonText(this,"","collapse",n.translate("button_collapse"))):(n.collapsed=!0,n.panel.style.display="none",n.setButtonText(this,"","expand",n.translate("button_expand")))}),this.options.collapsed&&u(this.toggle_button,"click"),this.schema.options&&typeof this.schema.options.disable_collapse!="undefined"?this.schema.options.disable_collapse&&(this.toggle_button.style.display="none"):this.jsoneditor.options.disable_collapse&&(this.toggle_button.style.display="none"));this.add_row_button=this.getButton(this.getItemTitle(),"add",this.translate("button_add_row_title",[this.getItemTitle()]));this.add_row_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.addRow();n.refreshValue();n.refreshRowButtons();n.onChange(!0)});n.controls.appendChild(this.add_row_button);this.delete_last_row_button=this.getButton(this.translate("button_delete_last",[this.getItemTitle()]),"delete",this.translate("button_delete_last_title",[this.getItemTitle()]));this.delete_last_row_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();var i=n.getValue();i.pop();n.setValue(i);n.onChange(!0)});n.controls.appendChild(this.delete_last_row_button);this.remove_all_rows_button=this.getButton(this.translate("button_delete_all"),"delete",this.translate("button_delete_all_title"));this.remove_all_rows_button.addEventListener("click",function(t){t.preventDefault();t.stopPropagation();n.setValue([]);n.onChange(!0)});n.controls.appendChild(this.remove_all_rows_button)}});n.defaults.editors.multiple=n.AbstractEditor.extend({register:function(){if(this.editors){for(var n=0;n<this.editors.length;n++)this.editors[n]&&this.editors[n].unregister();this.editors[this.type]&&this.editors[this.type].register()}this._super()},unregister:function(){if(this._super(),this.editors)for(var n=0;n<this.editors.length;n++)this.editors[n]&&this.editors[n].unregister()},getNumColumns:function(){return this.editors[this.type]?Math.max(this.editors[this.type].getNumColumns(),4):4},enable:function(){if(!this.always_disabled){if(this.editors)for(var n=0;n<this.editors.length;n++)this.editors[n]&&this.editors[n].enable();this.switcher.disabled=!1;this._super()}},disable:function(n){if(n&&(this.always_disabled=!0),this.editors)for(var t=0;t<this.editors.length;t++)this.editors[t]&&this.editors[t].disable(n);this.switcher.disabled=!0;this._super()},switchEditor:function(n){var i=this,r;this.editors[n]||this.buildChildEditor(n);r=i.getValue();i.type=n;i.register();t(i.editors,function(n,t){t&&(i.type===n?(i.keep_values&&t.setValue(r,!0),t.container.style.display=""):t.container.style.display="none")});i.refreshValue();i.refreshHeaderText()},buildChildEditor:function(n){var t=this,u=this.types[n],f=t.theme.getChildEditorHolder(),r,e;t.editor_holder.appendChild(f);typeof u=="string"?(r=i({},t.schema),r.type=u):(r=i({},t.schema,u),r=t.jsoneditor.expandRefs(r),u&&u.required&&Array.isArray(u.required)&&t.schema.required&&Array.isArray(t.schema.required)&&(r.required=t.schema.required.concat(u.required)));e=t.jsoneditor.getEditorClass(r);t.editors[n]=t.jsoneditor.createEditor(e,{jsoneditor:t.jsoneditor,schema:r,container:f,path:t.path,parent:t,required:!0});t.editors[n].preBuild();t.editors[n].build();t.editors[n].postBuild();t.editors[n].header&&(t.editors[n].header.style.display="none");t.editors[n].option=t.switcher_options[n];f.addEventListener("change_header_text",function(){t.refreshHeaderText()});n!==t.type&&(f.style.display="none")},preBuild:function(){var r=this,n,i;this.types=[];this.type=0;this.editors=[];this.validators=[];this.keep_values=!0;typeof this.jsoneditor.options.keep_oneof_values!="undefined"&&(this.keep_values=this.jsoneditor.options.keep_oneof_values);typeof this.options.keep_oneof_values!="undefined"&&(this.keep_values=this.options.keep_oneof_values);this.schema.oneOf?(this.oneOf=!0,this.types=this.schema.oneOf,delete this.schema.oneOf):this.schema.anyOf?(this.anyOf=!0,this.types=this.schema.anyOf,delete this.schema.anyOf):(this.schema.type&&this.schema.type!=="any"?this.types=Array.isArray(this.schema.type)?this.schema.type:[this.schema.type]:(this.types=["string","number","integer","boolean","object","array","null"],this.schema.disallow&&(n=this.schema.disallow,typeof n=="object"&&Array.isArray(n)||(n=[n]),i=[],t(this.types,function(t,r){n.indexOf(r)===-1&&i.push(r)}),this.types=i)),delete this.schema.type);this.display_text=this.getDisplayText(this.types)},build:function(){var r=this,f=this.container,u;this.header=this.label=this.theme.getFormInputLabel(this.getTitle());this.container.appendChild(this.header);this.switcher=this.theme.getSwitcher(this.display_text);f.appendChild(this.switcher);this.switcher.addEventListener("change",function(n){n.preventDefault();n.stopPropagation();r.switchEditor(r.display_text.indexOf(this.value));r.onChange(!0)});this.editor_holder=document.createElement("div");f.appendChild(this.editor_holder);u={};r.jsoneditor.options.custom_validators&&(u.custom_validators=r.jsoneditor.options.custom_validators);this.switcher_options=this.theme.getSwitcherOptions(this.switcher);t(this.types,function(t,f){r.editors[t]=!1;var e;typeof f=="string"?(e=i({},r.schema),e.type=f):(e=i({},r.schema,f),f.required&&Array.isArray(f.required)&&r.schema.required&&Array.isArray(r.schema.required)&&(e.required=r.schema.required.concat(f.required)));r.validators[t]=new n.Validator(r.jsoneditor,e,u)});this.switchEditor(0)},onChildEditorChange:function(){this.editors[this.type]&&(this.refreshValue(),this.refreshHeaderText());this._super()},refreshHeaderText:function(){var n=this.getDisplayText(this.types);t(this.switcher_options,function(t,i){i.textContent=n[t]})},refreshValue:function(){this.value=this.editors[this.type].getValue()},setValue:function(n,i){var r=this,f=this.type,u;t(this.validators,function(t,i){if(!i.validate(n).length)return r.type=t,r.switcher.value=r.display_text[t],!1});u=this.type!=f;u&&this.switchEditor(this.type);this.editors[this.type].setValue(n,i);this.refreshValue();r.onChange(u)},destroy:function(){t(this.editors,function(n,t){t&&t.destroy()});this.editor_holder&&this.editor_holder.parentNode&&this.editor_holder.parentNode.removeChild(this.editor_holder);this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher);this._super()},showValidationErrors:function(n){var r=this,u;this.oneOf||this.anyOf?(u=this.oneOf?"oneOf":"anyOf",t(this.editors,function(f,e){if(e){var o=r.path+"."+u+"["+f+"]",s=[];t(n,function(n,t){if(t.path.substr(0,o.length)===o){var u=i({},t);u.path=r.path+u.path.substr(o.length);s.push(u)}});e.showValidationErrors(s)}})):t(this.editors,function(t,i){i&&i.showValidationErrors(n)})}});n.defaults.editors["enum"]=n.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var i=this.container,n,t;for(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.container.appendChild(this.title),this.options.enum_titles=this.options.enum_titles||[],this["enum"]=this.schema["enum"],this.selected=0,this.select_options=[],this.html_values=[],n=this,t=0;t<this["enum"].length;t++)this.select_options[t]=this.options.enum_titles[t]||"Value "+(t+1),this.html_values[t]=this.getHTML(this["enum"][t]);this.switcher=this.theme.getSwitcher(this.select_options);this.container.appendChild(this.switcher);this.display_area=this.theme.getIndentedPanel();this.container.appendChild(this.display_area);this.options.hide_display&&(this.display_area.style.display="none");this.switcher.addEventListener("change",function(){n.selected=n.select_options.indexOf(this.value);n.value=n["enum"][n.selected];n.refreshValue();n.onChange(!0)});this.value=this["enum"][0];this.refreshValue();this["enum"].length===1&&(this.switcher.style.display="none")},refreshValue:function(){var n=this,i;if(n.selected=-1,i=JSON.stringify(this.value),t(this["enum"],function(t,r){if(i===JSON.stringify(r))return n.selected=t,!1}),n.selected<0){n.setValue(n["enum"][0]);return}this.switcher.value=this.select_options[this.selected];this.display_area.innerHTML=this.html_values[this.selected]},enable:function(){this.always_disabled||(this.switcher.disabled=!1,this._super())},disable:function(n){n&&(this.always_disabled=!0);this.switcher.disabled=!0;this._super()},getHTML:function(n){var r=this,i;return n===null?"<em>null<\/em>":typeof n=="object"?(i="",t(n,function(t,u){var f=r.getHTML(u);Array.isArray(n)||(f="<div><em>"+t+"<\/em>: "+f+"<\/div>");i+="<li>"+f+"<\/li>"}),i=Array.isArray(n)?"<ol>"+i+"<\/ol>":"<ul style='margin-top:0;margin-bottom:0;padding-top:0;padding-bottom:0;'>"+i+"<\/ul>"):typeof n=="boolean"?n?"true":"false":typeof n=="string"?n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},setValue:function(n){this.value!==n&&(this.value=n,this.refreshValue(),this.onChange())},destroy:function(){this.display_area&&this.display_area.parentNode&&this.display_area.parentNode.removeChild(this.display_area);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.switcher&&this.switcher.parentNode&&this.switcher.parentNode.removeChild(this.switcher);this._super()}});n.defaults.editors.select=n.AbstractEditor.extend({setValue:function(n){n=this.typecast(n||"");var t=n;(this.enum_values.indexOf(t)<0&&(t=this.enum_values[0]),this.value!==t)&&(this.input.value=this.enum_options[this.enum_values.indexOf(t)],this.select2&&(this.select2v4?this.select2.val(this.input.value).trigger("change"):this.select2.select2("val",this.input.value)),this.value=t,this.onChange(),this.change())},register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},getNumColumns:function(){var n,t;if(!this.enum_options)return 3;for(n=this.getTitle().length,t=0;t<this.enum_options.length;t++)n=Math.max(n,this.enum_options[t].length+4);return Math.min(12,Math.max(n/7,2))},typecast:function(n){return this.schema.type==="boolean"?!!n:this.schema.type==="number"?1*n:this.schema.type==="integer"?Math.floor(n*1):""+n},getValue:function(){return this.dependenciesFulfilled?this.typecast(this.value):undefined},preBuild:function(){var r=this,n,u;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],this.schema["enum"])u=this.schema.options&&this.schema.options.enum_titles||[],t(this.schema["enum"],function(n,t){r.enum_options[n]=""+t;r.enum_display[n]=""+(u[n]||t);r.enum_values[n]=r.typecast(t)}),this.isRequired()||(r.enum_display.unshift(" "),r.enum_options.unshift("undefined"),r.enum_values.unshift(undefined));else if(this.schema.type==="boolean")r.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],r.enum_options=["1",""],r.enum_values=[!0,!1],this.isRequired()||(r.enum_display.unshift(" "),r.enum_options.unshift("undefined"),r.enum_values.unshift(undefined));else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(n=0;n<this.schema.enumSource.length;n++)this.enumSource[n]=typeof this.schema.enumSource[n]=="string"?{source:this.schema.enumSource[n]}:Array.isArray(this.schema.enumSource[n])?this.schema.enumSource[n]:i({},this.schema.enumSource[n]);else this.enumSource=this.schema.enumValue?[{source:this.schema.enumSource,value:this.schema.enumValue}]:[{source:this.schema.enumSource}];for(n=0;n<this.enumSource.length;n++)this.enumSource[n].value&&(this.enumSource[n].value=this.jsoneditor.compileTemplate(this.enumSource[n].value,this.template_engine)),this.enumSource[n].title&&(this.enumSource[n].title=this.jsoneditor.compileTemplate(this.enumSource[n].title,this.template_engine)),this.enumSource[n].filter&&(this.enumSource[n].filter=this.jsoneditor.compileTemplate(this.enumSource[n].filter,this.template_engine))}else throw"'select' editor requires the enum property to be set.";},build:function(){var n=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText));this.options.compact&&(this.container.className+=" compact");this.input=this.theme.getSelectInput(this.enum_options);this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(t){t.preventDefault();t.stopPropagation();n.onInputChange()});this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton);this.container.appendChild(this.control);this.value=this.enum_values[0]},onInputChange:function(){var t=this.typecast(this.input.value),n;if(n=this.enum_options.indexOf(t)===-1?this.enum_values[0]:this.enum_values[this.enum_options.indexOf(t)],n!==this.value){this.value=n;this.onChange(!0)}},setupSelect2:function(){var r,t;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2&&(this.enum_options.length>2||this.enum_options.length&&this.enumSource)){r=i({},n.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(r=i(r,this.schema.options.select2_options));this.select2=window.jQuery(this.input).select2(r);this.select2v4=this.select2.select2.hasOwnProperty("amd");t=this;this.select2.on("select2-blur",function(){t.input.value=t.select2v4?t.select2.val():t.select2.select2("val");t.onInputChange()});this.select2.on("change",function(){t.input.value=t.select2v4?t.select2.val():t.select2.select2("val");t.onInputChange()})}else this.select2=null},postBuild:function(){this._super();this.theme.afterInputReady(this.input);this.setupSelect2()},onWatchedFieldChange:function(){var l=this,o,t,r,u,n,i,s,h,f,c,e;if(this.enumSource){for(o=this.getWatchedFieldValues(),r=[],u=[],n=0;n<this.enumSource.length;n++)if(Array.isArray(this.enumSource[n]))r=r.concat(this.enumSource[n]),u=u.concat(this.enumSource[n]);else if(i=[],i=Array.isArray(this.enumSource[n].source)?this.enumSource[n].source:o[this.enumSource[n].source],i){if(this.enumSource[n].slice&&(i=Array.prototype.slice.apply(i,this.enumSource[n].slice)),this.enumSource[n].filter){for(s=[],t=0;t<i.length;t++)this.enumSource[n].filter({i:t,item:i[t],watched:o})&&s.push(i[t]);i=s}for(h=[],f=[],t=0;t<i.length;t++)c=i[t],f[t]=this.enumSource[n].value?this.enumSource[n].value({i:t,item:c}):i[t],h[t]=this.enumSource[n].title?this.enumSource[n].title({i:t,item:c}):f[t];r=r.concat(f);u=u.concat(h)}if(e=this.value,this.theme.setSelectOptions(this.input,r,u),this.enum_options=r,this.enum_display=u,this.enum_values=r,this.select2&&this.select2.select2("destroy"),r.indexOf(e)!==-1)this.input.value=e,this.value=e;else{if(this.input.value=r[0],this.value=this.typecast(r[0]||""),this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor.onChange();this.jsoneditor.notifyWatchers(this.path)}this.setupSelect2()}this._super()},enable:function(){this.always_disabled||(this.input.disabled=!1,this.select2&&(this.select2v4?this.select2.prop("disabled",!1):this.select2.select2("enable",!0)));this._super()},disable:function(n){n&&(this.always_disabled=!0);this.input.disabled=!0;this.select2&&(this.select2v4?this.select2.prop("disabled",!0):this.select2.select2("enable",!1));this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.select2&&(this.select2.select2("destroy"),this.select2=null);this._super()}});n.defaults.editors.selectize=n.AbstractEditor.extend({setValue:function(n){n=this.typecast(n||"");var t=n;(this.enum_values.indexOf(t)<0&&(t=this.enum_values[0]),this.value!==t)&&(this.input.value=this.enum_options[this.enum_values.indexOf(t)],this.selectize&&this.selectize[0].selectize.addItem(t),this.value=t,this.onChange())},register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},getNumColumns:function(){var n,t;if(!this.enum_options)return 3;for(n=this.getTitle().length,t=0;t<this.enum_options.length;t++)n=Math.max(n,this.enum_options[t].length+4);return Math.min(12,Math.max(n/7,2))},typecast:function(n){return this.schema.type==="boolean"?!!n:this.schema.type==="number"?1*n:this.schema.type==="integer"?Math.floor(n*1):""+n},getValue:function(){return this.dependenciesFulfilled?this.value:undefined},preBuild:function(){var r=this,n,u;if(this.input_type="select",this.enum_options=[],this.enum_values=[],this.enum_display=[],this.schema.enum)u=this.schema.options&&this.schema.options.enum_titles||[],t(this.schema.enum,function(n,t){r.enum_options[n]=""+t;r.enum_display[n]=""+(u[n]||t);r.enum_values[n]=r.typecast(t)});else if(this.schema.type==="boolean")r.enum_display=this.schema.options&&this.schema.options.enum_titles||["true","false"],r.enum_options=["1","0"],r.enum_values=[!0,!1];else if(this.schema.enumSource){if(this.enumSource=[],this.enum_display=[],this.enum_options=[],this.enum_values=[],Array.isArray(this.schema.enumSource))for(n=0;n<this.schema.enumSource.length;n++)this.enumSource[n]=typeof this.schema.enumSource[n]=="string"?{source:this.schema.enumSource[n]}:Array.isArray(this.schema.enumSource[n])?this.schema.enumSource[n]:i({},this.schema.enumSource[n]);else this.enumSource=this.schema.enumValue?[{source:this.schema.enumSource,value:this.schema.enumValue}]:[{source:this.schema.enumSource}];for(n=0;n<this.enumSource.length;n++)this.enumSource[n].value&&(this.enumSource[n].value=this.jsoneditor.compileTemplate(this.enumSource[n].value,this.template_engine)),this.enumSource[n].title&&(this.enumSource[n].title=this.jsoneditor.compileTemplate(this.enumSource[n].title,this.template_engine)),this.enumSource[n].filter&&(this.enumSource[n].filter=this.jsoneditor.compileTemplate(this.enumSource[n].filter,this.template_engine))}else throw"'select' editor requires the enum property to be set.";},build:function(){var n=this;this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText));this.options.compact&&(this.container.className+=" compact");this.input=this.theme.getSelectInput(this.enum_options);this.theme.setSelectOptions(this.input,this.enum_options,this.enum_display);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(t){t.preventDefault();t.stopPropagation();n.onInputChange()});this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton);this.container.appendChild(this.control);this.value=this.enum_values[0]},onInputChange:function(){var n=this.input.value,t=n;this.enum_options.indexOf(n)===-1&&(t=this.enum_options[0]);this.value=n;this.onChange(!0)},setupSelectize:function(){var r=this,t;window.jQuery&&window.jQuery.fn&&window.jQuery.fn.selectize&&(this.enum_options.length>=2||this.enum_options.length&&this.enumSource)?(t=i({},n.plugins.selectize),this.schema.options&&this.schema.options.selectize_options&&(t=i(t,this.schema.options.selectize_options)),this.selectize=window.jQuery(this.input).selectize(i(t,{create:t.create===undefined?!0:t.create,onChange:function(){r.onInputChange()}}))):this.selectize=null},postBuild:function(){this._super();this.theme.afterInputReady(this.input);this.setupSelectize()},onWatchedFieldChange:function(){var l=this,o,n,i,u,t,r,s,h,e,c,f;if(this.enumSource){for(o=this.getWatchedFieldValues(),i=[],u=[],t=0;t<this.enumSource.length;t++)if(Array.isArray(this.enumSource[t]))i=i.concat(this.enumSource[t]),u=u.concat(this.enumSource[t]);else if(o[this.enumSource[t].source]){if(r=o[this.enumSource[t].source],this.enumSource[t].slice&&(r=Array.prototype.slice.apply(r,this.enumSource[t].slice)),this.enumSource[t].filter){for(s=[],n=0;n<r.length;n++)this.enumSource[t].filter({i:n,item:r[n]})&&s.push(r[n]);r=s}for(h=[],e=[],n=0;n<r.length;n++)c=r[n],e[n]=this.enumSource[t].value?this.enumSource[t].value({i:n,item:c}):r[n],h[n]=this.enumSource[t].title?this.enumSource[t].title({i:n,item:c}):e[n];i=i.concat(e);u=u.concat(h)}if(f=this.value,f!==undefined&&f!==""&&i.indexOf(f)===-1&&(i=i.concat(f),u=u.concat(f)),this.theme.setSelectOptions(this.input,i,u),this.enum_options=i,this.enum_display=u,this.enum_values=i,i.indexOf(f)!==-1)this.input.value=f,this.value=f;else{if(this.input.value=i[0],this.value=i[0]||"",this.parent)this.parent.onChildEditorChange(this);else this.jsoneditor.onChange();this.jsoneditor.notifyWatchers(this.path)}this.selectize?this.updateSelectizeOptions(i):this.setupSelectize();this._super()}},updateSelectizeOptions:function(n){var t=this.selectize[0].selectize,r=this,i;t.off();t.clearOptions();for(i in n)t.addOption({value:n[i],text:n[i]});t.addItem(this.value);t.on("change",function(){r.onInputChange()})},enable:function(){this.always_disabled||(this.input.disabled=!1,this.selectize&&this.selectize[0].selectize.unlock(),this._super())},disable:function(n){n&&(this.always_disabled=!0);this.input.disabled=!0;this.selectize&&this.selectize[0].selectize.lock();this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.selectize&&(this.selectize[0].selectize.destroy(),this.selectize=null);this._super()}});n.defaults.editors.multiselect=n.AbstractEditor.extend({preBuild:function(){var n;this._super();this.select_options={};this.select_values={};var i=this.jsoneditor.expandRefs(this.schema.items||{}),t=i["enum"]||[],r=i.options?i.options.enum_titles||[]:[];for(this.option_keys=[],this.option_titles=[],n=0;n<t.length;n++)this.sanitize(t[n])===t[n]&&(this.option_keys.push(t[n]+""),this.option_titles.push((r[n]||t[n])+""),this.select_values[t[n]+""]=t[n])},build:function(){var t=this,n,i;if(this.options.compact||(this.header=this.label=this.theme.getFormInputLabel(this.getTitle())),this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description)),!this.schema.format&&this.option_keys.length<8||this.schema.format==="checkbox"){for(this.input_type="checkboxes",this.inputs={},this.controls={},n=0;n<this.option_keys.length;n++)this.inputs[this.option_keys[n]]=this.theme.getCheckbox(),this.select_options[this.option_keys[n]]=this.inputs[this.option_keys[n]],i=this.theme.getCheckboxLabel(this.option_titles[n]),this.controls[this.option_keys[n]]=this.theme.getFormControl(i,this.inputs[this.option_keys[n]]);this.control=this.theme.getMultiCheckboxHolder(this.controls,this.label,this.description)}else{for(this.input_type="select",this.input=this.theme.getSelectInput(this.option_keys),this.theme.setSelectOptions(this.input,this.option_keys,this.option_titles),this.input.multiple=!0,this.input.size=Math.min(10,this.option_keys.length),n=0;n<this.option_keys.length;n++)this.select_options[this.option_keys[n]]=this.input.children[n];(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.control=this.theme.getFormControl(this.label,this.input,this.description)}this.container.appendChild(this.control);this.control.addEventListener("change",function(i){i.preventDefault();i.stopPropagation();var r=[];for(n=0;n<t.option_keys.length;n++)(t.select_options[t.option_keys[n]].selected||t.select_options[t.option_keys[n]].checked)&&r.push(t.select_values[t.option_keys[n]]);t.updateValue(r);t.onChange(!0)})},setValue:function(n){var t;for(n=n||[],typeof n!="object"?n=[n]:Array.isArray(n)||(n=[]),t=0;t<n.length;t++)typeof n[t]!="string"&&(n[t]+="");for(t in this.select_options)this.select_options.hasOwnProperty(t)&&(this.select_options[t][this.input_type==="select"?"selected":"checked"]=n.indexOf(t)!==-1);this.updateValue(n);this.onChange()},setupSelect2:function(){var r,t;if(window.jQuery&&window.jQuery.fn&&window.jQuery.fn.select2){r=window.jQuery.extend({},n.plugins.select2);this.schema.options&&this.schema.options.select2_options&&(r=i(r,this.schema.options.select2_options));this.select2=window.jQuery(this.input).select2(r);this.select2v4=this.select2.select2.hasOwnProperty("amd");t=this;this.select2.on("select2-blur",function(){t.value=t.select2v4?t.select2.val():t.select2.select2("val");t.onChange(!0)});this.select2.on("change",function(){t.value=t.select2v4?t.select2.val():t.select2.select2("val");t.onChange(!0)})}else this.select2=null},onInputChange:function(){this.value=this.input.value;this.onChange(!0)},postBuild:function(){this._super();this.setupSelect2()},register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},getNumColumns:function(){var n=this.getTitle().length;for(var t in this.select_values)this.select_values.hasOwnProperty(t)&&(n=Math.max(n,(this.select_values[t]+"").length+4));return Math.min(12,Math.max(n/7,2))},updateValue:function(n){for(var r,i=!1,u=[],t=0;t<n.length;t++){if(!this.select_options[n[t]+""]){i=!0;continue}r=this.sanitize(this.select_values[n[t]]);u.push(r);r!==n[t]&&(i=!0)}return this.value=u,this.select2&&(this.select2v4?this.select2.val(this.value).trigger("change"):this.select2.select2("val",this.value)),i},sanitize:function(n){return this.schema.items.type==="number"?1*n:this.schema.items.type==="integer"?Math.floor(n*1):""+n},enable:function(){if(!this.always_disabled){if(this.input)this.input.disabled=!1;else if(this.inputs)for(var n in this.inputs)this.inputs.hasOwnProperty(n)&&(this.inputs[n].disabled=!1);this.select2&&(this.select2v4?this.select2.prop("disabled",!1):this.select2.select2("enable",!0));this._super()}},disable:function(n){if(n&&(this.always_disabled=!0),this.input)this.input.disabled=!0;else if(this.inputs)for(var t in this.inputs)this.inputs.hasOwnProperty(t)&&(this.inputs[t].disabled=!0);this.select2&&(this.select2v4?this.select2.prop("disabled",!0):this.select2.select2("enable",!1));this._super()},destroy:function(){this.select2&&(this.select2.select2("destroy"),this.select2=null);this._super()}});n.defaults.editors.base64=n.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var n=this;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText)),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!window.FileReader)throw"FileReader required for base64 editor";this.uploader=this.theme.getFormInputField("file");this.uploader.addEventListener("change",function(t){if(t.preventDefault(),t.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(t){n.value=t.target.result;n.refreshPreview();n.onChange(!0);i=null};i.readAsDataURL(this.files[0])}})}this.preview=this.theme.getFormInputDescription(this.schema.description);this.container.appendChild(this.preview);this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview,this.infoButton);this.container.appendChild(this.control)},refreshPreview:function(){var n,t;this.last_preview!==this.value&&(this.last_preview=this.value,this.preview.innerHTML="",this.value)&&(n=this.value.match(/^data:([^;,]+)[;,]/),n&&(n=n[1]),n?(this.preview.innerHTML="<strong>Type:<\/strong> "+n+", <strong>Size:<\/strong> "+Math.floor((this.value.length-this.value.split(",")[0].length-1)/1.33333)+" bytes",n.substr(0,5)==="image"&&(this.preview.innerHTML+="<br>",t=document.createElement("img"),t.style.maxWidth="100%",t.style.maxHeight="100px",t.src=this.value,this.preview.appendChild(t))):this.preview.innerHTML="<em>Invalid data URI<\/em>")},enable:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),this._super())},disable:function(n){n&&(this.always_disabled=!0);this.uploader&&(this.uploader.disabled=!0);this._super()},setValue:function(n){this.value!==n&&(this.value=n,this.input.value=this.value,this.refreshPreview(),this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader);this._super()}});n.defaults.editors.upload=n.AbstractEditor.extend({getNumColumns:function(){return 4},build:function(){var t=this,n;if(this.title=this.header=this.label=this.theme.getFormInputLabel(this.getTitle()),this.input=this.theme.getFormInputField("hidden"),this.container.appendChild(this.input),!this.schema.readOnly&&!this.schema.readonly){if(!this.jsoneditor.options.upload)throw"Upload handler required for upload editor";this.uploader=this.theme.getFormInputField("file");this.uploader.addEventListener("change",function(n){if(n.preventDefault(),n.stopPropagation(),this.files&&this.files.length){var i=new FileReader;i.onload=function(n){t.preview_value=n.target.result;t.refreshPreview();t.onChange(!0);i=null};i.readAsDataURL(this.files[0])}})}n=this.schema.description;n||(n="");this.preview=this.theme.getFormInputDescription(n);this.container.appendChild(this.preview);this.control=this.theme.getFormControl(this.label,this.uploader||this.input,this.preview);this.container.appendChild(this.control)},refreshPreview:function(){var n,t,u,r,i;this.last_preview!==this.preview_value&&(this.last_preview=this.preview_value,this.preview.innerHTML="",this.preview_value)&&(n=this,t=this.preview_value.match(/^data:([^;,]+)[;,]/),t&&(t=t[1]),t||(t="unknown"),u=this.uploader.files[0],this.preview.innerHTML="<strong>Type:<\/strong> "+t+", <strong>Size:<\/strong> "+u.size+" bytes",t.substr(0,5)==="image"&&(this.preview.innerHTML+="<br>",r=document.createElement("img"),r.style.maxWidth="100%",r.style.maxHeight="100px",r.src=this.preview_value,this.preview.appendChild(r)),this.preview.innerHTML+="<br>",i=this.getButton("Upload","upload","Upload"),this.preview.appendChild(i),i.addEventListener("click",function(t){t.preventDefault();i.setAttribute("disabled","disabled");n.theme.removeInputError(n.uploader);n.theme.getProgressBar&&(n.progressBar=n.theme.getProgressBar(),n.preview.appendChild(n.progressBar));n.jsoneditor.options.upload(n.path,u,{success:function(t){if(n.setValue(t),n.parent)n.parent.onChildEditorChange(n);else n.jsoneditor.onChange();n.progressBar&&n.preview.removeChild(n.progressBar);i.removeAttribute("disabled")},failure:function(t){n.theme.addInputError(n.uploader,t);n.progressBar&&n.preview.removeChild(n.progressBar);i.removeAttribute("disabled")},updateProgress:function(t){n.progressBar&&(t?n.theme.updateProgressBar(n.progressBar,t):n.theme.updateProgressBarUnknown(n.progressBar))}})}),(this.jsoneditor.options.auto_upload||this.schema.options.auto_upload)&&(i.dispatchEvent(new MouseEvent("click")),this.preview.removeChild(i)))},enable:function(){this.always_disabled||(this.uploader&&(this.uploader.disabled=!1),this._super())},disable:function(n){n&&(this.always_disabled=!0);this.uploader&&(this.uploader.disabled=!0);this._super()},setValue:function(n){this.value!==n&&(this.value=n,this.input.value=this.value,this.onChange())},destroy:function(){this.preview&&this.preview.parentNode&&this.preview.parentNode.removeChild(this.preview);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this.uploader&&this.uploader.parentNode&&this.uploader.parentNode.removeChild(this.uploader);this._super()}});n.defaults.editors.checkbox=n.AbstractEditor.extend({setValue:function(n){this.value=!!n;this.input.checked=this.value;this.onChange()},register:function(){(this._super(),this.input)&&this.input.setAttribute("name",this.formname)},unregister:function(){(this._super(),this.input)&&this.input.removeAttribute("name")},getNumColumns:function(){return Math.min(12,Math.max(this.getTitle().length/7,2))},build:function(){var n=this;this.options.compact||(this.label=this.header=this.theme.getCheckboxLabel(this.getTitle()));this.schema.description&&(this.description=this.theme.getFormInputDescription(this.schema.description));this.options.infoText&&(this.infoButton=this.theme.getInfoButton(this.options.infoText));this.options.compact&&(this.container.className+=" compact");this.input=this.theme.getCheckbox();this.control=this.theme.getFormControl(this.label,this.input,this.description,this.infoButton);(this.schema.readOnly||this.schema.readonly)&&(this.always_disabled=!0,this.input.disabled=!0);this.input.addEventListener("change",function(t){t.preventDefault();t.stopPropagation();n.value=this.checked;n.onChange(!0)});this.container.appendChild(this.control)},enable:function(){this.always_disabled||(this.input.disabled=!1,this._super())},disable:function(n){n&&(this.always_disabled=!0);this.input.disabled=!0;this._super()},destroy:function(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this._super()}});n.defaults.editors.arraySelectize=n.AbstractEditor.extend({build:function(){this.title=this.theme.getFormInputLabel(this.getTitle());this.title_controls=this.theme.getHeaderButtonHolder();this.title.appendChild(this.title_controls);this.error_holder=document.createElement("div");this.schema.description&&(this.description=this.theme.getDescription(this.schema.description));this.input=document.createElement("select");this.input.setAttribute("multiple","multiple");var n=this.theme.getFormControl(this.title,this.input,this.description);this.container.appendChild(n);this.container.appendChild(this.error_holder);window.jQuery(this.input).selectize({delimiter:!1,createOnBlur:!0,create:!0})},postBuild:function(){var n=this;this.input.selectize.on("change",function(){n.refreshValue();n.onChange(!0)})},destroy:function(){this.empty(!0);this.title&&this.title.parentNode&&this.title.parentNode.removeChild(this.title);this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description);this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input);this._super()},empty:function(){},setValue:function(n,t){var i=this;n=n||[];Array.isArray(n)||(n=[n]);this.input.selectize.clearOptions();this.input.selectize.clear(!0);n.forEach(function(n){i.input.selectize.addOption({text:n,value:n})});this.input.selectize.setValue(n);this.refreshValue(t)},refreshValue:function(){this.value=this.input.selectize.getValue()},showValidationErrors:function(n){var i=this,r=[],u=[],f;t(n,function(n,t){t.path===i.path?r.push(t):u.push(t)});this.error_holder&&(r.length?(f=[],this.error_holder.innerHTML="",this.error_holder.style.display="",t(r,function(n,t){i.error_holder.appendChild(i.theme.getErrorMessage(t.message))})):this.error_holder.style.display="none")}});f=function(){var n=document.documentElement;return n.matches?"matches":n.webkitMatchesSelector?"webkitMatchesSelector":n.mozMatchesSelector?"mozMatchesSelector":n.msMatchesSelector?"msMatchesSelector":n.oMatchesSelector?"oMatchesSelector":void 0}();n.AbstractTheme=r.extend({getContainer:function(){return document.createElement("div")},getFloatRightLinkHolder:function(){var n=document.createElement("div");return n.style=n.style||{},n.style.cssFloat="right",n.style.marginLeft="10px",n},getModal:function(){var n=document.createElement("div");return n.style.backgroundColor="white",n.style.border="1px solid black",n.style.boxShadow="3px 3px black",n.style.position="absolute",n.style.zIndex="10",n.style.display="none",n},getGridContainer:function(){return document.createElement("div")},getGridRow:function(){var n=document.createElement("div");return n.className="row",n},getGridColumn:function(){return document.createElement("div")},setGridColumnSize:function(){},getLink:function(n){var t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(document.createTextNode(n)),t},disableHeader:function(n){n.style.color="#ccc"},disableLabel:function(n){n.style.color="#ccc"},enableHeader:function(n){n.style.color=""},enableLabel:function(n){n.style.color=""},getInfoButton:function(n){var i=document.createElement("span"),t;return i.innerText="ⓘ",i.style.fontSize="16px",i.style.fontWeight="bold",i.style.padding=".25rem",i.style.position="relative",i.style.display="inline-block",t=document.createElement("span"),t.style.fontSize="12px",i.style.fontWeight="normal",t.style["font-family"]="sans-serif",t.style.visibility="hidden",t.style["background-color"]="rgba(50, 50, 50, .75)",t.style.margin="0 .25rem",t.style.color="#FAFAFA",t.style.padding=".5rem 1rem",t.style["border-radius"]=".25rem",t.style.width="20rem",t.style.position="absolute",t.innerText=n,i.onmouseover=function(){t.style.visibility="visible"},i.onmouseleave=function(){t.style.visibility="hidden"},i.appendChild(t),i},getFormInputLabel:function(n){var t=document.createElement("label");return t.appendChild(document.createTextNode(n)),t},getCheckboxLabel:function(n){var t=this.getFormInputLabel(n);return t.style.fontWeight="normal",t},getHeader:function(n){var t=document.createElement("h3");return typeof n=="string"?t.textContent=n:t.appendChild(n),t},getCheckbox:function(){var n=this.getFormInputField("checkbox");return n.style.display="inline-block",n.style.width="auto",n},getMultiCheckboxHolder:function(n,t,i){var u=document.createElement("div"),r;t&&(t.style.display="block",u.appendChild(t));for(r in n)n.hasOwnProperty(r)&&(n[r].style.display="inline-block",n[r].style.marginRight="20px",u.appendChild(n[r]));return i&&u.appendChild(i),u},getSelectInput:function(n){var t=document.createElement("select");return n&&this.setSelectOptions(t,n),t},getSwitcher:function(n){var t=this.getSelectInput(n);return t.style.backgroundColor="transparent",t.style.display="inline-block",t.style.fontStyle="italic",t.style.fontWeight="normal",t.style.height="auto",t.style.marginBottom=0,t.style.marginLeft="5px",t.style.padding="0 0 0 3px",t.style.width="auto",t},getSwitcherOptions:function(n){return n.getElementsByTagName("option")},setSwitcherOptions:function(n,t,i){this.setSelectOptions(n,t,i)},setSelectOptions:function(n,t,i){var r,u;for(i=i||[],n.innerHTML="",r=0;r<t.length;r++)u=document.createElement("option"),u.setAttribute("value",t[r]),u.textContent=i[r]||t[r],n.appendChild(u)},getTextareaInput:function(){var n=document.createElement("textarea");return n.style=n.style||{},n.style.width="100%",n.style.height="300px",n.style.boxSizing="border-box",n},getRangeInput:function(n,t,i){var r=this.getFormInputField("range");return r.setAttribute("min",n),r.setAttribute("max",t),r.setAttribute("step",i),r},getFormInputField:function(n){var t=document.createElement("input");return t.setAttribute("type",n),t},afterInputReady:function(){},getFormControl:function(n,t,i,r){var u=document.createElement("div");return u.className="form-control",n&&u.appendChild(n),t.type==="checkbox"&&n?(n.insertBefore(t,n.firstChild),r&&n.appendChild(r)):(r&&n.appendChild(r),u.appendChild(t)),i&&u.appendChild(i),u},getIndentedPanel:function(){var n=document.createElement("div");return n.style=n.style||{},n.style.paddingLeft="10px",n.style.marginLeft="10px",n.style.borderLeft="1px solid #ccc",n},getChildEditorHolder:function(){return document.createElement("div")},getDescription:function(n){var t=document.createElement("p");return t.innerHTML=n,t},getCheckboxDescription:function(n){return this.getDescription(n)},getFormInputDescription:function(n){return this.getDescription(n)},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("div")},getButton:function(n,t,i){var r=document.createElement("button");return r.type="button",this.setButtonText(r,n,t,i),r},setButtonText:function(n,t,i,r){n.innerHTML="";i&&(n.appendChild(i),n.innerHTML+=" ");n.appendChild(document.createTextNode(t));r&&n.setAttribute("title",r)},getTable:function(){return document.createElement("table")},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(n){var t=document.createElement("th");return t.textContent=n,t},getTableCell:function(){return document.createElement("td")},getErrorMessage:function(n){var t=document.createElement("p");return t.style=t.style||{},t.style.color="red",t.appendChild(document.createTextNode(n)),t},addInputError:function(){},removeInputError:function(){},addTableRowError:function(){},removeTableRowError:function(){},getTabHolder:function(){var n=document.createElement("div");return n.innerHTML="<div style='float: left; width: 130px;' class='tabs'><\/div><div class='content' style='margin-left: 130px;'><\/div><div style='clear:both;'><\/div>",n},applyStyles:function(n,t){n.style=n.style||{};for(var i in t)t.hasOwnProperty(i)&&(n.style[i]=t[i])},closest:function(n,t){while(n&&n!==document)if(n[f]){if(n[f](t))return n;n=n.parentNode}else return!1;return!1},getTab:function(n){var t=document.createElement("div");return t.appendChild(n),t.style=t.style||{},this.applyStyles(t,{border:"1px solid #ccc",borderWidth:"1px 0 1px 1px",textAlign:"center",lineHeight:"30px",borderRadius:"5px",borderBottomRightRadius:0,borderTopRightRadius:0,fontWeight:"bold",cursor:"pointer"}),t},getTabContentHolder:function(n){return n.children[1]},getTabContent:function(){return this.getIndentedPanel()},markTabActive:function(n){this.applyStyles(n,{opacity:1,background:"white"})},markTabInactive:function(n){this.applyStyles(n,{opacity:.5,background:""})},addTab:function(n,t){n.children[0].appendChild(t)},getBlockLink:function(){var n=document.createElement("a");return n.style.display="block",n},getBlockLinkHolder:function(){return document.createElement("div")},getLinksHolder:function(){return document.createElement("div")},createMediaLink:function(n,t,i){n.appendChild(t);i.style.width="100%";n.appendChild(i)},createImageLink:function(n,t,i){n.appendChild(t);t.appendChild(i)}});n.defaults.themes.bootstrap2=n.AbstractTheme.extend({getRangeInput:function(n,t,i){return this._super(n,t,i)},getGridContainer:function(){var n=document.createElement("div");return n.className="container-fluid",n},getGridRow:function(){var n=document.createElement("div");return n.className="row-fluid",n},getFormInputLabel:function(n){var t=this._super(n);return t.style.display="inline-block",t.style.fontWeight="bold",t},setGridColumnSize:function(n,t){n.className="span"+t},getSelectInput:function(n){var t=this._super(n);return t.style.width="auto",t.style.maxWidth="98%",t},getFormInputField:function(n){var t=this._super(n);return t.style.width="98%",t},afterInputReady:function(n){if(!n.controlgroup&&(n.controlgroup=this.closest(n,".control-group"),n.controls=this.closest(n,".controls"),this.closest(n,".compact")&&(n.controlgroup.className=n.controlgroup.className.replace(/control-group/g,"").replace(/[ ]{2,}/g," "),n.controls.className=n.controlgroup.className.replace(/controls/g,"").replace(/[ ]{2,}/g," "),n.style.marginBottom=0),this.queuedInputErrorText)){var t=this.queuedInputErrorText;delete this.queuedInputErrorText;this.addInputError(n,t)}},getIndentedPanel:function(){var n=document.createElement("div");return n.className="well well-small",n.style.paddingBottom=0,n},getInfoButton:function(n){var i=document.createElement("span"),t;return i.className="icon-info-sign pull-right",i.style.padding=".25rem",i.style.position="relative",i.style.display="inline-block",t=document.createElement("span"),t.style["font-family"]="sans-serif",t.style.visibility="hidden",t.style["background-color"]="rgba(50, 50, 50, .75)",t.style.margin="0 .25rem",t.style.color="#FAFAFA",t.style.padding=".5rem 1rem",t.style["border-radius"]=".25rem",t.style.width="25rem",t.style.transform="translateX(-27rem) translateY(-.5rem)",t.style.position="absolute",t.innerText=n,i.onmouseover=function(){t.style.visibility="visible"},i.onmouseleave=function(){t.style.visibility="hidden"},i.appendChild(t),i},getFormInputDescription:function(n){var t=document.createElement("p");return t.className="help-inline",t.textContent=n,t},getFormControl:function(n,t,i,r){var f=document.createElement("div"),u;return f.className="control-group",u=document.createElement("div"),u.className="controls",n&&t.getAttribute("type")==="checkbox"?(f.appendChild(u),n.className+=" checkbox",n.appendChild(t),u.appendChild(n),r&&u.appendChild(r),u.style.height="30px"):(n&&(n.className+=" control-label",f.appendChild(n)),r&&u.appendChild(r),u.appendChild(t),f.appendChild(u)),i&&u.appendChild(i),f},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.marginLeft="10px",n},getButtonHolder:function(){var n=document.createElement("div");return n.className="btn-group",n},getButton:function(n,t,i){var r=this._super(n,t,i);return r.className+=" btn btn-default",r},getTable:function(){var n=document.createElement("table");return n.className="table table-bordered",n.style.width="auto",n.style.maxWidth="none",n},addInputError:function(n,t){if(!n.controlgroup){this.queuedInputErrorText=t;return}n.controlgroup&&n.controls&&(n.controlgroup.className+=" error",n.errmsg?n.errmsg.style.display="":(n.errmsg=document.createElement("p"),n.errmsg.className="help-block errormsg",n.controls.appendChild(n.errmsg)),n.errmsg.textContent=t)},removeInputError:function(n){(n.controlgroup||delete this.queuedInputErrorText,n.errmsg)&&(n.errmsg.style.display="none",n.controlgroup.className=n.controlgroup.className.replace(/\s?error/g,""))},getTabHolder:function(){var n=document.createElement("div");return n.className="tabbable tabs-left",n.innerHTML="<ul class='nav nav-tabs span2' style='margin-right: 0;'><\/ul><div class='tab-content span10' style='overflow:visible;'><\/div>",n},getTab:function(n){var i=document.createElement("li"),t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(n),i.appendChild(t),i},getTabContentHolder:function(n){return n.children[1]},getTabContent:function(){var n=document.createElement("div");return n.className="tab-pane active",n},markTabActive:function(n){n.className+=" active"},markTabInactive:function(n){n.className=n.className.replace(/\s?active/g,"")},addTab:function(n,t){n.children[0].appendChild(t)},getProgressBar:function(){var t=document.createElement("div"),n;return t.className="progress",n=document.createElement("div"),n.className="bar",n.style.width="0%",t.appendChild(n),t},updateProgressBar:function(n,t){n&&(n.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(n){n&&(n.className="progress progress-striped active",n.firstChild.style.width="100%")}});n.defaults.themes.bootstrap3=n.AbstractTheme.extend({getSelectInput:function(n){var t=this._super(n);return t.className+="form-control",t},setGridColumnSize:function(n,t){n.className="col-md-"+t},afterInputReady:function(n){if(!n.controlgroup&&(n.controlgroup=this.closest(n,".form-group"),this.closest(n,".compact")&&(n.controlgroup.style.marginBottom=0),this.queuedInputErrorText)){var t=this.queuedInputErrorText;delete this.queuedInputErrorText;this.addInputError(n,t)}},getTextareaInput:function(){var n=document.createElement("textarea");return n.className="form-control",n},getRangeInput:function(n,t,i){return this._super(n,t,i)},getFormInputField:function(n){var t=this._super(n);return n!=="checkbox"&&(t.className+="form-control"),t},getFormControl:function(n,t,i,r){var u=document.createElement("div");return n&&t.type==="checkbox"?(u.className+=" checkbox",n.appendChild(t),n.style.fontSize="14px",u.style.marginTop="0",r&&u.appendChild(r),u.appendChild(n),t.style.position="relative",t.style.cssFloat="left"):(u.className+=" form-group",n&&(n.className+=" control-label",u.appendChild(n)),r&&u.appendChild(r),u.appendChild(t)),i&&u.appendChild(i),u},getIndentedPanel:function(){var n=document.createElement("div");return n.className="well well-sm",n.style.paddingBottom=0,n},getInfoButton:function(n){var i=document.createElement("span"),t;return i.className="glyphicon glyphicon-info-sign pull-right",i.style.padding=".25rem",i.style.position="relative",i.style.display="inline-block",t=document.createElement("span"),t.style["font-family"]="sans-serif",t.style.visibility="hidden",t.style["background-color"]="rgba(50, 50, 50, .75)",t.style.margin="0 .25rem",t.style.color="#FAFAFA",t.style.padding=".5rem 1rem",t.style["border-radius"]=".25rem",t.style.width="25rem",t.style.transform="translateX(-27rem) translateY(-.5rem)",t.style.position="absolute",t.innerText=n,i.onmouseover=function(){t.style.visibility="visible"},i.onmouseleave=function(){t.style.visibility="hidden"},i.appendChild(t),i},getFormInputDescription:function(n){var t=document.createElement("p");return t.className="help-block",t.innerHTML=n,t},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.marginLeft="10px",n},getButtonHolder:function(){var n=document.createElement("div");return n.className="btn-group",n},getButton:function(n,t,i){var r=this._super(n,t,i);return r.className+="btn btn-default",r},getTable:function(){var n=document.createElement("table");return n.className="table table-bordered",n.style.width="auto",n.style.maxWidth="none",n},addInputError:function(n,t){if(!n.controlgroup){this.queuedInputErrorText=t;return}n.controlgroup.className+=" has-error";n.errmsg?n.errmsg.style.display="":(n.errmsg=document.createElement("p"),n.errmsg.className="help-block errormsg",n.controlgroup.appendChild(n.errmsg));n.errmsg.textContent=t},removeInputError:function(n){(n.controlgroup||delete this.queuedInputErrorText,n.errmsg)&&(n.errmsg.style.display="none",n.controlgroup.className=n.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var n=document.createElement("div");return n.innerHTML="<div class='tabs list-group col-md-2'><\/div><div class='col-md-10'><\/div>",n.className="rows",n},getTab:function(n){var t=document.createElement("a");return t.className="list-group-item",t.setAttribute("href","#"),t.appendChild(n),t},markTabActive:function(n){n.className+=" active"},markTabInactive:function(n){n.className=n.className.replace(/\s?active/g,"")},getProgressBar:function(){var i=0,t=document.createElement("div"),n;return t.className="progress",n=document.createElement("div"),n.className="progress-bar",n.setAttribute("role","progressbar"),n.setAttribute("aria-valuenow",i),n.setAttribute("aria-valuemin",0),n.setAttribute("aria-valuenax",100),n.innerHTML=i+"%",t.appendChild(n),t},updateProgressBar:function(n,t){if(n){var i=n.firstChild,r=t+"%";i.setAttribute("aria-valuenow",t);i.style.width=r;i.innerHTML=r}},updateProgressBarUnknown:function(n){if(n){var t=n.firstChild;n.className="progress progress-striped active";t.removeAttribute("aria-valuenow");t.style.width="100%";t.innerHTML=""}}});n.defaults.themes.bootstrap4=n.AbstractTheme.extend({getSelectInput:function(n){var t=this._super(n);return t.className+="form-control",t},setGridColumnSize:function(n,t){n.className="col-md-"+t},afterInputReady:function(n){n.controlgroup||(n.controlgroup=this.closest(n,".form-group"),this.closest(n,".compact")&&(n.controlgroup.style.marginBottom=0))},getTextareaInput:function(){var n=document.createElement("textarea");return n.className="form-control",n},getRangeInput:function(n,t,i){return this._super(n,t,i)},getFormInputField:function(n){var t=this._super(n);return n!=="checkbox"&&(t.className+="form-control"),t},getFormControl:function(n,t,i){var r=document.createElement("div");return n&&t.type==="checkbox"?(r.className+=" checkbox",n.appendChild(t),n.style.fontSize="14px",r.style.marginTop="0",r.appendChild(n),t.style.position="relative",t.style.cssFloat="left"):(r.className+=" form-group",n&&(n.className+=" form-control-label",r.appendChild(n)),r.appendChild(t)),i&&r.appendChild(i),r},getIndentedPanel:function(){var n=document.createElement("div");return n.className="card card-block bg-faded",n.style.paddingBottom=0,n},getFormInputDescription:function(n){var t=document.createElement("p");return t.className="form-text",t.innerHTML=n,t},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.marginLeft="10px",n},getButtonHolder:function(){var n=document.createElement("div");return n.className="btn-group",n},getButton:function(n,t,i){var r=this._super(n,t,i);return r.className+="btn btn-secondary",r},getTable:function(){var n=document.createElement("table");return n.className="table-bordered table-sm",n.style.width="auto",n.style.maxWidth="none",n},addInputError:function(n,t){n.controlgroup&&(n.controlgroup.className+=" has-error",n.errmsg?n.errmsg.style.display="":(n.errmsg=document.createElement("p"),n.errmsg.className="form-text errormsg",n.controlgroup.appendChild(n.errmsg)),n.errmsg.textContent=t)},removeInputError:function(n){n.errmsg&&(n.errmsg.style.display="none",n.controlgroup.className=n.controlgroup.className.replace(/\s?has-error/g,""))},getTabHolder:function(){var n=document.createElement("div");return n.innerHTML="<div class='tabs list-group col-md-2'><\/div><div class='col-md-10'><\/div>",n.className="rows",n},getTab:function(n){var t=document.createElement("a");return t.className="list-group-item-action",t.setAttribute("href","#"),t.appendChild(n),t},markTabActive:function(n){n.className+=" active"},markTabInactive:function(n){n.className=n.className.replace(/\s?active/g,"")},getProgressBar:function(){var i=0,t=document.createElement("div"),n;return t.className="progress",n=document.createElement("div"),n.className="progress-bar",n.setAttribute("role","progressbar"),n.setAttribute("aria-valuenow",i),n.setAttribute("aria-valuemin",0),n.setAttribute("aria-valuenax",100),n.innerHTML=i+"%",t.appendChild(n),t},updateProgressBar:function(n,t){if(n){var i=n.firstChild,r=t+"%";i.setAttribute("aria-valuenow",t);i.style.width=r;i.innerHTML=r}},updateProgressBarUnknown:function(n){if(n){var t=n.firstChild;n.className="progress progress-striped active";t.removeAttribute("aria-valuenow");t.style.width="100%";t.innerHTML=""}}});n.defaults.themes.foundation=n.AbstractTheme.extend({getChildEditorHolder:function(){var n=document.createElement("div");return n.style.marginBottom="15px",n},getSelectInput:function(n){var t=this._super(n);return t.style.minWidth="none",t.style.padding="5px",t.style.marginTop="3px",t},getSwitcher:function(n){var t=this._super(n);return t.style.paddingRight="8px",t},afterInputReady:function(n){if(!n.group&&(this.closest(n,".compact")&&(n.style.marginBottom=0),n.group=this.closest(n,".form-control"),this.queuedInputErrorText)){var t=this.queuedInputErrorText;delete this.queuedInputErrorText;this.addInputError(n,t)}},getFormInputLabel:function(n){var t=this._super(n);return t.style.display="inline-block",t},getFormInputField:function(n){var t=this._super(n);return t.style.width="100%",t.style.marginBottom=n==="checkbox"?"0":"12px",t},getFormInputDescription:function(n){var t=document.createElement("p");return t.textContent=n,t.style.marginTop="-10px",t.style.fontStyle="italic",t},getIndentedPanel:function(){var n=document.createElement("div");return n.className="panel",n.style.paddingBottom=0,n},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.display="inline-block",n.style.marginLeft="10px",n.style.verticalAlign="middle",n},getButtonHolder:function(){var n=document.createElement("div");return n.className="button-group",n},getButton:function(n,t,i){var r=this._super(n,t,i);return r.className+=" small button",r},addInputError:function(n,t){if(!n.group){this.queuedInputErrorText=t;return}n.group.className+=" error";n.errmsg?n.errmsg.style.display="":(n.insertAdjacentHTML("afterend",'<small class="error"><\/small>'),n.errmsg=n.parentNode.getElementsByClassName("error")[0]);n.errmsg.textContent=t},removeInputError:function(n){(n.group||delete this.queuedInputErrorText,n.errmsg)&&(n.group.className=n.group.className.replace(/ error/g,""),n.errmsg.style.display="none")},getProgressBar:function(){var t=document.createElement("div"),n;return t.className="progress",n=document.createElement("span"),n.className="meter",n.style.width="0%",t.appendChild(n),t},updateProgressBar:function(n,t){n&&(n.firstChild.style.width=t+"%")},updateProgressBarUnknown:function(n){n&&(n.firstChild.style.width="100%")}});n.defaults.themes.foundation3=n.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var n=this._super();return n.style.fontSize=".6em",n},getFormInputLabel:function(n){var t=this._super(n);return t.style.fontWeight="bold",t},getTabHolder:function(){var n=document.createElement("div");return n.className="row",n.innerHTML="<dl class='tabs vertical two columns'><\/dl><div class='tabs-content ten columns'><\/div>",n},setGridColumnSize:function(n,t){n.className="columns "+["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"][t]},getTab:function(n){var i=document.createElement("dd"),t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(n),i.appendChild(t),i},getTabContentHolder:function(n){return n.children[1]},getTabContent:function(){var n=document.createElement("div");return n.className="content active",n.style.paddingLeft="5px",n},markTabActive:function(n){n.className+=" active"},markTabInactive:function(n){n.className=n.className.replace(/\s*active/g,"")},addTab:function(n,t){n.children[0].appendChild(t)}});n.defaults.themes.foundation4=n.defaults.themes.foundation.extend({getHeaderButtonHolder:function(){var n=this._super();return n.style.fontSize=".6em",n},setGridColumnSize:function(n,t){n.className="columns large-"+t},getFormInputDescription:function(n){var t=this._super(n);return t.style.fontSize=".8rem",t},getFormInputLabel:function(n){var t=this._super(n);return t.style.fontWeight="bold",t}});n.defaults.themes.foundation5=n.defaults.themes.foundation.extend({getFormInputDescription:function(n){var t=this._super(n);return t.style.fontSize=".8rem",t},setGridColumnSize:function(n,t){n.className="columns medium-"+t},getButton:function(n,t,i){var r=this._super(n,t,i);return r.className=r.className.replace(/\s*small/g,"")+" tiny",r},getTabHolder:function(){var n=document.createElement("div");return n.innerHTML="<dl class='tabs vertical'><\/dl><div class='tabs-content vertical'><\/div>",n},getTab:function(n){var i=document.createElement("dd"),t=document.createElement("a");return t.setAttribute("href","#"),t.appendChild(n),i.appendChild(t),i},getTabContentHolder:function(n){return n.children[1]},getTabContent:function(){var n=document.createElement("div");return n.className="content active",n.style.paddingLeft="5px",n},markTabActive:function(n){n.className+=" active"},markTabInactive:function(n){n.className=n.className.replace(/\s*active/g,"")},addTab:function(n,t){n.children[0].appendChild(t)}});n.defaults.themes.foundation6=n.defaults.themes.foundation5.extend({getIndentedPanel:function(){var n=document.createElement("div");return n.className="callout secondary",n},getButtonHolder:function(){var n=document.createElement("div");return n.className="button-group tiny",n.style.marginBottom=0,n},getFormInputLabel:function(n){var t=this._super(n);return t.style.display="block",t},getFormControl:function(n,t,i,r){var u=document.createElement("div");return u.className="form-control",n&&u.appendChild(n),t.type==="checkbox"?n.insertBefore(t,n.firstChild):n?(r&&n.appendChild(r),n.appendChild(t)):(r&&u.appendChild(r),u.appendChild(t)),i&&n.appendChild(i),u},addInputError:function(n,t){if(n.group){if(n.group.className+=" error",n.errmsg)n.errmsg.style.display="",n.className="";else{var i=document.createElement("span");i.className="form-error is-visible";n.group.getElementsByTagName("label")[0].appendChild(i);n.className=n.className+" is-invalid-input";n.errmsg=i}n.errmsg.textContent=t}},removeInputError:function(n){n.errmsg&&(n.className=n.className.replace(/ is-invalid-input/g,""),n.errmsg.parentNode&&n.errmsg.parentNode.removeChild(n.errmsg))}});n.defaults.themes.html=n.AbstractTheme.extend({getFormInputLabel:function(n){var t=this._super(n);return t.style.display="block",t.style.marginBottom="3px",t.style.fontWeight="bold",t},getFormInputDescription:function(n){var t=this._super(n);return t.style.fontSize=".8em",t.style.margin=0,t.style.display="inline-block",t.style.fontStyle="italic",t},getIndentedPanel:function(){var n=this._super();return n.style.border="1px solid #ddd",n.style.padding="5px",n.style.margin="5px",n.style.borderRadius="3px",n},getChildEditorHolder:function(){var n=this._super();return n.style.marginBottom="8px",n},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.display="inline-block",n.style.marginLeft="10px",n.style.fontSize=".8em",n.style.verticalAlign="middle",n},getTable:function(){var n=this._super();return n.style.borderBottom="1px solid #ccc",n.style.marginBottom="5px",n},addInputError:function(n,t){if(n.style.borderColor="red",n.errmsg)n.errmsg.style.display="block";else{var i=this.closest(n,".form-control");n.errmsg=document.createElement("div");n.errmsg.setAttribute("class","errmsg");n.errmsg.style=n.errmsg.style||{};n.errmsg.style.color="red";i.appendChild(n.errmsg)}n.errmsg.innerHTML="";n.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(n){n.style.borderColor="";n.errmsg&&(n.errmsg.style.display="none")},getProgressBar:function(){var n=document.createElement("progress");return n.setAttribute("max",100),n.setAttribute("value",0),n},updateProgressBar:function(n,t){n&&n.setAttribute("value",t)},updateProgressBarUnknown:function(n){n&&n.removeAttribute("value")}});n.defaults.themes.jqueryui=n.AbstractTheme.extend({getTable:function(){var n=this._super();return n.setAttribute("cellpadding",5),n.setAttribute("cellspacing",0),n},getTableHeaderCell:function(n){var t=this._super(n);return t.className="ui-state-active",t.style.fontWeight="bold",t},getTableCell:function(){var n=this._super();return n.className="ui-widget-content",n},getHeaderButtonHolder:function(){var n=this.getButtonHolder();return n.style.marginLeft="10px",n.style.fontSize=".6em",n.style.display="inline-block",n},getFormInputDescription:function(n){var t=this.getDescription(n);return t.style.marginLeft="10px",t.style.display="inline-block",t},getFormControl:function(n,t,i,r){var u=this._super(n,t,i,r);return t.type==="checkbox"?(u.style.lineHeight="25px",u.style.padding="3px 0"):u.style.padding="4px 0 8px 0",u},getDescription:function(n){var t=document.createElement("span");return t.style.fontSize=".8em",t.style.fontStyle="italic",t.textContent=n,t},getButtonHolder:function(){var n=document.createElement("div");return n.className="ui-buttonset",n.style.fontSize=".7em",n},getFormInputLabel:function(n){var t=document.createElement("label");return t.style.fontWeight="bold",t.style.display="block",t.textContent=n,t},getButton:function(n,t,i){var r=document.createElement("button"),u;return r.className="ui-button ui-widget ui-state-default ui-corner-all",t&&!n?(r.className+=" ui-button-icon-only",t.className+=" ui-button-icon-primary ui-icon-primary",r.appendChild(t)):t?(r.className+=" ui-button-text-icon-primary",t.className+=" ui-button-icon-primary ui-icon-primary",r.appendChild(t)):r.className+=" ui-button-text-only",u=document.createElement("span"),u.className="ui-button-text",u.textContent=n||i||".",r.appendChild(u),r.setAttribute("title",i),r},setButtonText:function(n,t,i,r){n.innerHTML="";n.className="ui-button ui-widget ui-state-default ui-corner-all";i&&!t?(n.className+=" ui-button-icon-only",i.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(i)):i?(n.className+=" ui-button-text-icon-primary",i.className+=" ui-button-icon-primary ui-icon-primary",n.appendChild(i)):n.className+=" ui-button-text-only";var u=document.createElement("span");u.className="ui-button-text";u.textContent=t||r||".";n.appendChild(u);n.setAttribute("title",r)},getIndentedPanel:function(){var n=document.createElement("div");return n.className="ui-widget-content ui-corner-all",n.style.padding="1em 1.4em",n.style.marginBottom="20px",n},afterInputReady:function(n){if(!n.controls&&(n.controls=this.closest(n,".form-control"),this.queuedInputErrorText)){var t=this.queuedInputErrorText;delete this.queuedInputErrorText;this.addInputError(n,t)}},addInputError:function(n,t){if(!n.controls){this.queuedInputErrorText=t;return}n.errmsg?n.errmsg.style.display="":(n.errmsg=document.createElement("div"),n.errmsg.className="ui-state-error",n.controls.appendChild(n.errmsg));n.errmsg.textContent=t},removeInputError:function(n){(n.controls||delete this.queuedInputErrorText,n.errmsg)&&(n.errmsg.style.display="none")},markTabActive:function(n){n.className=n.className.replace(/\s*ui-widget-header/g,"")+" ui-state-active"},markTabInactive:function(n){n.className=n.className.replace(/\s*ui-state-active/g,"")+" ui-widget-header"}});n.defaults.themes.barebones=n.AbstractTheme.extend({getFormInputLabel:function(n){return this._super(n)},getFormInputDescription:function(n){return this._super(n)},getIndentedPanel:function(){return this._super()},getChildEditorHolder:function(){return this._super()},getHeaderButtonHolder:function(){return this.getButtonHolder()},getTable:function(){return this._super()},addInputError:function(n,t){if(n.errmsg)n.errmsg.style.display="block";else{var i=this.closest(n,".form-control");n.errmsg=document.createElement("div");n.errmsg.setAttribute("class","errmsg");i.appendChild(n.errmsg)}n.errmsg.innerHTML="";n.errmsg.appendChild(document.createTextNode(t))},removeInputError:function(n){n.style.borderColor="";n.errmsg&&(n.errmsg.style.display="none")},getProgressBar:function(){var n=document.createElement("progress");return n.setAttribute("max",100),n.setAttribute("value",0),n},updateProgressBar:function(n,t){n&&n.setAttribute("value",t)},updateProgressBarUnknown:function(n){n&&n.removeAttribute("value")}});n.defaults.themes.materialize=n.AbstractTheme.extend({setGridColumnSize:function(n,t){n.className="col s"+t},getHeaderButtonHolder:function(){return this.getButtonHolder()},getButtonHolder:function(){return document.createElement("span")},getButton:function(n,t,i){n&&(t.className+=" left",t.style.marginRight="5px");var r=this._super(n,t,i);return r.className="waves-effect waves-light btn",r.style.fontSize="0.75rem",r.style.height="24px",r.style.lineHeight="24px",r.style.marginLeft="5px",r.style.padding="0 0.5rem",r},getFormControl:function(n,t,i,r){var u,f=t.type;return f&&f==="checkbox"?(u=document.createElement("p"),u.appendChild(t),n&&(n.setAttribute("for",t.id),u.appendChild(n)),u):(u=this._super(n,t,i,r),f&&f.startsWith("select")||(u.className="input-field"),f&&f==="color"&&(t.style.height="3rem",t.style.width="100%",t.style.margin="5px 0 20px 0",t.style.padding="3px",n&&(n.style.transform="translateY(-14px) scale(0.8)",n.style["-webkit-transform"]="translateY(-14px) scale(0.8)",n.style["-webkit-transform-origin"]="0 0",n.style["transform-origin"]="0 0")),u)},getDescription:function(n){var t=document.createElement("div");return t.className="grey-text",t.style.marginTop="-15px",t.innerHTML=n,t},getHeader:function(n){var t=document.createElement("h5");return typeof n=="string"?t.textContent=n:t.appendChild(n),t},getChildEditorHolder:function(){var n=document.createElement("div");return n.marginBottom="10px",n},getIndentedPanel:function(){var n=document.createElement("div");return n.className="card-panel",n},getTable:function(){var n=document.createElement("table");return n.className="striped bordered",n.style.marginBottom="10px",n},getTableRow:function(){return document.createElement("tr")},getTableHead:function(){return document.createElement("thead")},getTableBody:function(){return document.createElement("tbody")},getTableHeaderCell:function(n){var t=document.createElement("th");return t.textContent=n,t},getTableCell:function(){return document.createElement("td")},getTabHolder:function(){var t='<div class="col s2">\n   <ul class="tabs" style="height: auto; margin-top: 0.82rem; -ms-flex-direction: column; -webkit-flex-direction: column; flex-direction: column; display: -webkit-flex; display: flex;">\n   <\/ul>\n<\/div>\n<div class="col s10">\n<div>',n=document.createElement("div");return n.className="row card-panel",n.innerHTML=t,n},addTab:function(n,t){n.children[0].children[0].appendChild(t)},getTab:function(n){var t=document.createElement("li");return t.className="tab",this.applyStyles(t,{width:"100%",textAlign:"left",lineHeight:"24px",height:"24px",fontSize:"14px",cursor:"pointer"}),t.appendChild(n),t},markTabActive:function(n){this.applyStyles(n,{width:"100%",textAlign:"left",lineHeight:"24px",height:"24px",fontSize:"14px",cursor:"pointer",color:"rgba(238,110,115,1)",transition:"border-color .5s ease",borderRight:"3px solid #424242"})},markTabInactive:function(n){this.applyStyles(n,{width:"100%",textAlign:"left",lineHeight:"24px",height:"24px",fontSize:"14px",cursor:"pointer",color:"rgba(238,110,115,0.7)"})},getTabContentHolder:function(n){return n.children[1]},getTabContent:function(){return document.createElement("div")},addInputError:function(n,t){var r=n.parentNode,i;r&&(this.removeInputError(n),i=document.createElement("div"),i.className="error-text red-text",i.textContent=t,r.appendChild(i))},removeInputError:function(n){var i=n.parentElement,r,t;if(i)for(r=i.getElementsByClassName("error-text"),t=0;t<r.length;t++)i.removeChild(r[t])},addTableRowError:function(){},removeTableRowError:function(){},getSelectInput:function(n){var t=this._super(n);return t.className="browser-default",t},getTextareaInput:function(){var n=document.createElement("textarea");return n.style.marginBottom="5px",n.style.fontSize="1rem",n.style.fontFamily="monospace",n},getCheckbox:function(){var n=this.getFormInputField("checkbox");return n.id=this.createUuid(),n},getModal:function(){var n=document.createElement("div");return n.className="card-panel z-depth-3",n.style.padding="5px",n.style.position="absolute",n.style.zIndex="10",n.style.display="none",n},createUuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}});n.AbstractIconLib=r.extend({mapping:{collapse:"",expand:"","delete":"",edit:"",add:"",cancel:"",save:"",moveup:"",movedown:""},icon_prefix:"",getIconClass:function(n){return this.mapping[n]?this.icon_prefix+this.mapping[n]:null},getIcon:function(n){var i=this.getIconClass(n),t;return i?(t=document.createElement("i"),t.className=i,t):null}});n.defaults.iconlibs.bootstrap2=n.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-up","delete":"trash",edit:"pencil",add:"plus",cancel:"ban-circle",save:"ok",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"});n.defaults.iconlibs.bootstrap3=n.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"floppy-remove",save:"floppy-saved",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"glyphicon glyphicon-"});n.defaults.iconlibs.fontawesome3=n.AbstractIconLib.extend({mapping:{collapse:"chevron-down",expand:"chevron-right","delete":"remove",edit:"pencil",add:"plus",cancel:"ban-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"icon-"});n.defaults.iconlibs.fontawesome4=n.AbstractIconLib.extend({mapping:{collapse:"caret-square-o-down",expand:"caret-square-o-right","delete":"times",edit:"pencil",add:"plus",cancel:"ban",save:"save",moveup:"arrow-up",movedown:"arrow-down",copy:"files-o"},icon_prefix:"fa fa-"});n.defaults.iconlibs.foundation2=n.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"remove",edit:"edit",add:"add-doc",cancel:"error",save:"checkmark",moveup:"up-arrow",movedown:"down-arrow"},icon_prefix:"foundicon-"});n.defaults.iconlibs.foundation3=n.AbstractIconLib.extend({mapping:{collapse:"minus",expand:"plus","delete":"x",edit:"pencil",add:"page-add",cancel:"x-circle",save:"save",moveup:"arrow-up",movedown:"arrow-down"},icon_prefix:"fi-"});n.defaults.iconlibs.jqueryui=n.AbstractIconLib.extend({mapping:{collapse:"triangle-1-s",expand:"triangle-1-e","delete":"trash",edit:"pencil",add:"plusthick",cancel:"closethick",save:"disk",moveup:"arrowthick-1-n",movedown:"arrowthick-1-s"},icon_prefix:"ui-icon ui-icon-"});n.defaults.iconlibs.materialicons=n.AbstractIconLib.extend({mapping:{collapse:"arrow_drop_up",expand:"arrow_drop_down","delete":"delete",edit:"edit",add:"add",cancel:"cancel",save:"save",moveup:"arrow_upward",movedown:"arrow_downward",copy:"content_copy"},icon_class:"material-icons",icon_prefix:"",getIconClass:function(){return this.icon_class},getIcon:function(n){var i=this.mapping[n],t,r;return i?(t=document.createElement("i"),t.className=this.icon_class,r=document.createTextNode(i),t.appendChild(r),t):null}});n.defaults.templates["default"]=function(){return{compile:function(n){var i=n.match(/{{\s*([a-zA-Z0-9\-_ \.]+)\s*}}/g),r=i&&i.length,u,f,t;if(!r)return function(){return n};for(u=[],f=function(n){var t=i[n].replace(/[{}]+/g,"").trim().split("."),e=t.length,f,r;e>1?f=function(i){for(r=i,n=0;n<e;n++)if(r=r[t[n]],!r)break;return r}:(t=t[0],f=function(n){return n[t]});u.push({s:i[n],r:f})},t=0;t<r;t++)f(t);return function(i){var f=n+"",e;for(t=0;t<r;t++)e=u[t],f=f.replace(e.s,e.r(i));return f}}}};n.defaults.templates.ejs=function(){return window.EJS?{compile:function(n){var t=new window.EJS({text:n});return function(n){return t.render(n)}}}:!1};n.defaults.templates.handlebars=function(){return window.Handlebars};n.defaults.templates.hogan=function(){return window.Hogan?{compile:function(n){var t=window.Hogan.compile(n);return function(n){return t.render(n)}}}:!1};n.defaults.templates.lodash=function(){return window._?{compile:function(n){return function(t){return window._.template(n)(t)}}}:!1};n.defaults.templates.markup=function(){return!window.Mark||!window.Mark.up?!1:{compile:function(n){return function(t){return window.Mark.up(n,t)}}}};n.defaults.templates.mustache=function(){return window.Mustache?{compile:function(n){return function(t){return window.Mustache.render(n,t)}}}:!1};n.defaults.templates.swig=function(){return window.swig};n.defaults.templates.underscore=function(){return window._?{compile:function(n){return function(t){return window._.template(n,t)}}}:!1};n.defaults.theme="html";n.defaults.template="default";n.defaults.options={};n.defaults.translate=function(t,i){var f=n.defaults.languages[n.defaults.language],r,u;if(!f)throw"Unknown language "+n.defaults.language;if(r=f[t]||n.defaults.languages[n.defaults.default_language][t],typeof r=="undefined")throw"Unknown translate string "+t;if(i)for(u=0;u<i.length;u++)r=r.replace(new RegExp("\\{\\{"+u+"}}","g"),i[u]);return r};n.defaults.default_language="en";n.defaults.language=n.defaults.default_language;n.defaults.languages.en={error_notset:"Property must be set",error_notempty:"Value required",error_enum:"Value must be one of the enumerated values",error_anyOf:"Value must validate against at least one of the provided schemas",error_oneOf:"Value must validate against exactly one of the provided schemas. It currently validates against {{0}} of the schemas.",error_not:"Value must not validate against the provided schema",error_type_union:"Value must be one of the provided types",error_type:"Value must be of type {{0}}",error_disallow_union:"Value must not be one of the provided disallowed types",error_disallow:"Value must not be of type {{0}}",error_multipleOf:"Value must be a multiple of {{0}}",error_maximum_excl:"Value must be less than {{0}}",error_maximum_incl:"Value must be at most {{0}}",error_minimum_excl:"Value must be greater than {{0}}",error_minimum_incl:"Value must be at least {{0}}",error_maxLength:"Value must be at most {{0}} characters long",error_minLength:"Value must be at least {{0}} characters long",error_pattern:"Value must match the pattern {{0}}",error_additionalItems:"No additional items allowed in this array",error_maxItems:"Value must have at most {{0}} items",error_minItems:"Value must have at least {{0}} items",error_uniqueItems:"Array must have unique items",error_maxProperties:"Object must have at most {{0}} properties",error_minProperties:"Object must have at least {{0}} properties",error_required:"Object is missing the required property '{{0}}'",error_additional_properties:"No additional properties allowed, but property {{0}} is set",error_dependency:"Must have property {{0}}",button_delete_all:"All",button_delete_all_title:"Delete All",button_delete_last:"Last {{0}}",button_delete_last_title:"Delete Last {{0}}",button_add_row_title:"Add {{0}}",button_move_down_title:"Move down",button_move_up_title:"Move up",button_delete_row_title:"Delete {{0}}",button_delete_row_title_short:"Delete",button_collapse:"Collapse",button_expand:"Expand"};n.plugins={ace:{theme:""},SimpleMDE:{},sceditor:{},select2:{},selectize:{}};t(n.defaults.editors,function(t,i){n.defaults.editors[t].options=i.options||{}});n.defaults.resolvers.unshift(function(n){if(typeof n.type!="string")return"multiple"});n.defaults.resolvers.unshift(function(n){if(!n.type&&n.properties)return"object"});n.defaults.resolvers.unshift(function(n){if(typeof n.type=="string")return n.type});n.defaults.resolvers.unshift(function(n){if(n.type==="integer"&&n.format==="rating")return"rating"});n.defaults.resolvers.unshift(function(t){if(t.type==="boolean")return t.format==="checkbox"||t.options&&t.options.checkbox?"checkbox":n.plugins.selectize.enable?"selectize":"select"});n.defaults.resolvers.unshift(function(n){if(n.type==="any")return"multiple"});n.defaults.resolvers.unshift(function(n){if(n.type==="string"&&n.media&&n.media.binaryEncoding==="base64")return"base64"});n.defaults.resolvers.unshift(function(n){if(n.type==="string"&&n.format==="url"&&n.options&&n.options.upload===!0&&window.FileReader)return"upload"});n.defaults.resolvers.unshift(function(n){if(n.type==="array"&&n.format==="table")return"table"});n.defaults.resolvers.unshift(function(t){if(t.enumSource)return n.plugins.selectize.enable?"selectize":"select"});n.defaults.resolvers.unshift(function(t){if(t["enum"]){if(t.type==="array"||t.type==="object")return"enum";if(t.type==="number"||t.type==="integer"||t.type==="string")return n.plugins.selectize.enable?"selectize":"select"}});n.defaults.resolvers.unshift(function(t){if(t.type==="array"&&t.items&&!Array.isArray(t.items)&&t.uniqueItems&&["string","number","integer"].indexOf(t.items.type)>=0){if(t.items.enum)return"multiselect";if(n.plugins.selectize.enable&&t.items.type==="string")return"arraySelectize"}});n.defaults.resolvers.unshift(function(n){if(n.oneOf||n.anyOf)return"multiple"}),function(){if(window.jQuery||window.Zepto){var t=window.jQuery||window.Zepto;t.jsoneditor=n.defaults;t.fn.jsoneditor=function(t){var r=this,i=this.data("jsoneditor");if(t==="value"){if(!i)throw"Must initialize jsoneditor before getting/setting the value";if(arguments.length>1)i.setValue(arguments[1]);else return i.getValue()}else{if(t==="validate"){if(!i)throw"Must initialize jsoneditor before validating";return arguments.length>1?i.validate(arguments[1]):i.validate()}if(t==="destroy")i&&(i.destroy(),this.data("jsoneditor",null));else{i&&i.destroy();i=new n(this.get(0),t);this.data("jsoneditor",i);i.on("change",function(){r.trigger("change")});i.on("ready",function(){r.trigger("ready")})}}return this}}}();window.JSONEditor=n})();